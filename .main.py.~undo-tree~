(undo-tree-save-format-version . 1)
"72276739933549fcea774d01455dd8a798a51747"
[nil nil nil nil (27031 35640 642260 23000) 0 nil]
([nil nil ((nil rear-nonsticky nil 4457 . 4458) (nil fontified nil 1 . 4458) (1 . 4458) (#("\"\"\"fibrobot â€” WhatsApp Business webhook that logs incoming messages.\"\"\"
import os
import json
from datetime import datetime
from dotenv import load_dotenv
from fastapi import FastAPI, Request, Query, HTTPException, BackgroundTasks
from fastapi.responses import PlainTextResponse
import uvicorn

load_dotenv(\".secrets\")

WHATSAPP_API_KEY = os.getenv(\"WHATSAPP_API_KEY\", \"\")
PHONE_NUMBER_ID = os.getenv(\"PHONE_NUMBER_ID\", \"\")
VERIFY_TOKEN = os.getenv(\"VERIFY_TOKEN\", \"fibrobot_verify\")
LOGS_DIR = os.path.join(os.path.dirname(__file__), \"logs\")

app = FastAPI(title=\"fibrobot\")


@app.middleware(\"http\")
async def add_ngrok_header(request: Request, call_next):
    response = await call_next(request)
    response.headers[\"ngrok-skip-browser-warning\"] = \"true\"
    return response


def log_message(msg: dict, contact_name: str = \"\"):
    \"\"\"Write a message to a log file in logs/.\"\"\"
    os.makedirs(LOGS_DIR, exist_ok=True)
    sender = contact_name or msg.get(\"from\", \"unknown\")
    ts = msg.get(\"timestamp\", \"0\")
    msg_id = msg.get(\"id\", ts)

    try:
        time_str = datetime.fromtimestamp(int(ts)).strftime(\"%Y-%m-%d %H:%M:%S\")
    except Exception:
        time_str = ts

    mtype = msg.get(\"type\", \"unknown\")
    body = \"\"
    if mtype == \"text\":
        body = msg.get(\"text\", {}).get(\"body\", \"\")

    log_entry = {
        \"id\": msg_id,
        \"from\": sender,
        \"time\": time_str,
        \"type\": mtype,
        \"body\": body,
        \"raw\": msg,
    }

    filename = f\"{msg_id}_{sender}.json\"
    filepath = os.path.join(LOGS_DIR, filename)

    # Avoid duplicate logs on Meta retries
    if not os.path.exists(filepath):
        with open(filepath, \"w\", encoding=\"utf-8\") as f:
            json.dump(log_entry, f, indent=2, ensure_ascii=False)

    print(f\"ðŸ“¨ {sender} ({time_str}): {body}\")


def get_contact_name(value: dict, phone: str) -> str:
    for c in value.get(\"contacts\", []):
        if c.get(\"wa_id\") == phone:
            return c.get(\"profile\", {}).get(\"name\", phone)
    return phone


@app.get(\"/webhook\", response_class=PlainTextResponse)
async def verify_webhook(
    hub_mode: str = Query(None, alias=\"hub.mode\"),
    hub_token: str = Query(None, alias=\"hub.verify_token\"),
    hub_challenge: str = Query(None, alias=\"hub.challenge\"),
):
    if hub_mode == \"subscribe\" and hub_token == VERIFY_TOKEN:
        return hub_challenge
    raise HTTPException(status_code=403, detail=\"Forbidden\")


@app.post(\"/webhook\")
async def receive_message(request: Request, background_tasks: BackgroundTasks):
    data = await request.json()
    for entry in data.get(\"entry\", []):
        for change in entry.get(\"changes\", []):
            value = change.get(\"value\", {})
            for msg in value.get(\"messages\", []):
                name = get_contact_name(value, msg.get(\"from\", \"\"))
                background_tasks.add_task(log_message, msg, name)
    return {\"status\": \"ok\"}


if __name__ == \"__main__\":
    uvicorn.run(\"main:app\", host=\"0.0.0.0\", port=3000, reload=True" 0 2 (face font-lock-doc-face fontified t) 2 3 (face font-lock-doc-face fontified t syntax-table (15)) 3 68 (face font-lock-doc-face fontified t) 68 69 (face font-lock-doc-face fontified t syntax-table (15)) 69 71 (face font-lock-doc-face fontified t) 71 72 (fontified t) 72 78 (face font-lock-keyword-face fontified t) 78 82 (fontified t) 82 88 (face font-lock-keyword-face fontified t) 88 94 (fontified t) 94 98 (face font-lock-keyword-face fontified t) 98 108 (fontified t) 108 114 (face font-lock-keyword-face fontified t) 114 124 (fontified t) 124 128 (face font-lock-keyword-face fontified t) 128 136 (fontified t) 136 142 (face font-lock-keyword-face fontified t) 142 155 (fontified t) 155 159 (face font-lock-keyword-face fontified t) 159 168 (fontified t) 168 174 (face font-lock-keyword-face fontified t) 174 231 (fontified t) 231 235 (face font-lock-keyword-face fontified t) 235 254 (fontified t) 254 260 (face font-lock-keyword-face fontified t) 260 279 (fontified t) 279 285 (face font-lock-keyword-face fontified t) 285 306 (fontified t) 306 307 (face (rainbow-delimiters-depth-1-face) fontified t) 307 317 (face font-lock-string-face fontified t) 317 318 (face (rainbow-delimiters-depth-1-face) fontified t) 318 320 (fontified t) 320 336 (face font-lock-variable-name-face fontified t) 336 337 (fontified t) 337 338 (face font-lock-operator-face fontified t) 338 348 (fontified t) 348 349 (face (rainbow-delimiters-depth-1-face) fontified t) 349 367 (face font-lock-string-face fontified t) 367 369 (fontified t) 369 371 (face font-lock-string-face fontified t) 371 372 (face (rainbow-delimiters-depth-1-face) fontified t) 372 373 (fontified t) 373 388 (face font-lock-variable-name-face fontified t) 388 389 (fontified t) 389 390 (face font-lock-operator-face fontified t) 390 400 (fontified t) 400 401 (face (rainbow-delimiters-depth-1-face) fontified t) 401 418 (face font-lock-string-face fontified t) 418 420 (fontified t) 420 422 (face font-lock-string-face fontified t) 422 423 (face (rainbow-delimiters-depth-1-face) fontified t) 423 424 (fontified t) 424 436 (face font-lock-variable-name-face fontified t) 436 437 (fontified t) 437 438 (face font-lock-operator-face fontified t) 438 448 (fontified t) 448 449 (face (rainbow-delimiters-depth-1-face) fontified t) 449 463 (face font-lock-string-face fontified t) 463 465 (fontified t) 465 482 (face font-lock-string-face fontified t) 482 483 (face (rainbow-delimiters-depth-1-face) fontified t) 483 484 (fontified t) 484 492 (face font-lock-variable-name-face fontified t) 492 493 (fontified t) 493 494 (face font-lock-operator-face fontified t) 494 507 (fontified t) 507 508 (face (rainbow-delimiters-depth-1-face) fontified t) 508 523 (fontified t) 523 524 (face (rainbow-delimiters-depth-2-face) fontified t) 524 532 (fontified t) 532 533 (face (rainbow-delimiters-depth-2-face) fontified t) 533 535 (fontified t) 535 541 (face font-lock-string-face fontified t) 541 542 (face (rainbow-delimiters-depth-1-face) fontified t) 542 544 (fontified t) 544 547 (face font-lock-variable-name-face fontified t) 547 548 (fontified t) 548 549 (face font-lock-operator-face fontified t) 549 557 (fontified t) 557 558 (face (rainbow-delimiters-depth-1-face) fontified t) 558 563 (fontified t) 563 564 (face font-lock-operator-face fontified t) 564 574 (face font-lock-string-face fontified t) 574 575 (face (rainbow-delimiters-depth-1-face) fontified t) 575 578 (fontified t) 578 593 (face font-lock-type-face fontified t) 593 594 (face (rainbow-delimiters-depth-1-face) fontified t) 594 600 (face font-lock-string-face fontified t) 600 601 (face (rainbow-delimiters-depth-1-face) fontified t) 601 602 (fontified t) 602 611 (face font-lock-keyword-face fontified t) 611 612 (fontified t) 612 628 (face font-lock-function-name-face fontified t) 628 629 (face (rainbow-delimiters-depth-1-face) fontified t) 629 656 (fontified t) 656 657 (face (rainbow-delimiters-depth-1-face) fontified t) 657 663 (fontified t) 663 671 (face font-lock-variable-name-face fontified t) 671 672 (fontified t) 672 673 (face font-lock-operator-face fontified t) 673 674 (fontified t) 674 679 (face font-lock-keyword-face fontified t) 679 689 (fontified t) 689 690 (face (rainbow-delimiters-depth-1-face) fontified t) 690 697 (fontified t) 697 698 (face (rainbow-delimiters-depth-1-face) fontified t) 698 712 (fontified t) 712 719 (face font-lock-variable-name-face fontified t) 719 720 (face (rainbow-delimiters-depth-1-face) fontified t) 720 748 (face font-lock-string-face fontified t) 748 749 (face (rainbow-delimiters-depth-1-face) fontified t) 749 750 (fontified t) 750 751 (face font-lock-operator-face fontified t) 751 752 (fontified t) 752 758 (face font-lock-string-face fontified t) 758 763 (fontified t) 763 769 (face font-lock-keyword-face fontified t) 769 781 (fontified t) 781 784 (face font-lock-keyword-face fontified t) 784 785 (fontified t) 785 796 (face font-lock-function-name-face fontified t) 796 797 (face (rainbow-delimiters-depth-1-face) fontified t) 797 802 (fontified t) 802 806 (face font-lock-builtin-face fontified t) 806 822 (fontified t) 822 825 (face font-lock-builtin-face fontified t) 825 826 (fontified t) 826 827 (face font-lock-operator-face fontified t) 827 828 (fontified t) 828 830 (face font-lock-string-face fontified t) 830 831 (face (rainbow-delimiters-depth-1-face) fontified t) 831 837 (fontified t) 837 839 (face font-lock-doc-face fontified t) 839 840 (face font-lock-doc-face fontified t syntax-table (15)) 840 879 (face font-lock-doc-face fontified t) 879 880 (face font-lock-doc-face fontified t syntax-table (15)) 880 882 (face font-lock-doc-face fontified t) 882 898 (fontified t) 898 899 (face (rainbow-delimiters-depth-1-face) fontified t) 899 917 (fontified t) 917 918 (face font-lock-operator-face fontified t) 918 922 (face font-lock-constant-face fontified t) 922 923 (face (rainbow-delimiters-depth-1-face) fontified t) 923 928 (fontified t) 928 934 (face font-lock-variable-name-face fontified t) 934 935 (fontified t) 935 936 (face font-lock-operator-face fontified t) 936 950 (fontified t) 950 952 (face font-lock-keyword-face fontified t) 952 960 (fontified t) 960 961 (face (rainbow-delimiters-depth-1-face) fontified t) 961 967 (face font-lock-string-face fontified t) 967 969 (fontified t) 969 978 (face font-lock-string-face fontified t) 978 979 (face (rainbow-delimiters-depth-1-face) fontified t) 979 984 (fontified t) 984 986 (face font-lock-variable-name-face fontified t) 986 987 (fontified t) 987 988 (face font-lock-operator-face fontified t) 988 996 (fontified t) 996 997 (face (rainbow-delimiters-depth-1-face) fontified t) 997 1008 (face font-lock-string-face fontified t) 1008 1010 (fontified t) 1010 1013 (face font-lock-string-face fontified t) 1013 1014 (face (rainbow-delimiters-depth-1-face) fontified t) 1014 1019 (fontified t) 1019 1025 (face font-lock-variable-name-face fontified t) 1025 1026 (fontified t) 1026 1027 (face font-lock-operator-face fontified t) 1027 1035 (fontified t) 1035 1036 (face (rainbow-delimiters-depth-1-face) fontified t) 1036 1040 (face font-lock-string-face fontified t) 1040 1044 (fontified t) 1044 1045 (face (rainbow-delimiters-depth-1-face) fontified t) 1045 1051 (fontified t) 1051 1054 (face font-lock-keyword-face fontified t) 1054 1064 (fontified t) 1064 1072 (face font-lock-variable-name-face fontified t) 1072 1073 (fontified t) 1073 1074 (face font-lock-operator-face fontified t) 1074 1097 (fontified t) 1097 1098 (face (rainbow-delimiters-depth-1-face) fontified t) 1098 1101 (face font-lock-builtin-face fontified t) 1101 1102 (face (rainbow-delimiters-depth-2-face) fontified t) 1102 1104 (fontified t) 1104 1105 (face (rainbow-delimiters-depth-2-face) fontified t) 1105 1106 (face (rainbow-delimiters-depth-1-face) fontified t) 1106 1115 (fontified t) 1115 1116 (face (rainbow-delimiters-depth-1-face) fontified t) 1116 1135 (face font-lock-string-face fontified t) 1135 1136 (face (rainbow-delimiters-depth-1-face) fontified t) 1136 1141 (fontified t) 1141 1147 (face font-lock-keyword-face fontified t) 1147 1148 (fontified t) 1148 1157 (face font-lock-type-face fontified t) 1157 1167 (fontified t) 1167 1175 (face font-lock-variable-name-face fontified t) 1175 1176 (fontified t) 1176 1177 (face font-lock-operator-face fontified t) 1177 1186 (fontified t) 1186 1191 (face font-lock-variable-name-face fontified t) 1191 1192 (fontified t) 1192 1193 (face font-lock-operator-face fontified t) 1193 1201 (fontified t) 1201 1202 (face (rainbow-delimiters-depth-1-face) fontified t) 1202 1208 (face font-lock-string-face fontified t) 1208 1210 (fontified t) 1210 1219 (face font-lock-string-face fontified t) 1219 1220 (face (rainbow-delimiters-depth-1-face) fontified t) 1220 1225 (fontified t) 1225 1229 (face font-lock-variable-name-face fontified t) 1229 1230 (fontified t) 1230 1231 (face font-lock-operator-face fontified t) 1231 1232 (fontified t) 1232 1234 (face font-lock-string-face fontified t) 1234 1239 (fontified t) 1239 1241 (face font-lock-keyword-face fontified t) 1241 1248 (fontified t) 1248 1250 (face font-lock-operator-face fontified t) 1250 1251 (fontified t) 1251 1257 (face font-lock-string-face fontified t) 1257 1267 (fontified t) 1267 1271 (face font-lock-variable-name-face fontified t) 1271 1272 (fontified t) 1272 1273 (face font-lock-operator-face fontified t) 1273 1281 (fontified t) 1281 1282 (face (rainbow-delimiters-depth-1-face) fontified t) 1282 1288 (face font-lock-string-face fontified t) 1288 1290 (fontified t) 1290 1291 (face (rainbow-delimiters-depth-2-face) fontified t) 1291 1292 (face (rainbow-delimiters-depth-2-face) fontified t) 1292 1293 (face (rainbow-delimiters-depth-1-face) fontified t) 1293 1297 (fontified t) 1297 1298 (face (rainbow-delimiters-depth-1-face) fontified t) 1298 1304 (face font-lock-string-face fontified t) 1304 1306 (fontified t) 1306 1308 (face font-lock-string-face fontified t) 1308 1309 (face (rainbow-delimiters-depth-1-face) fontified t) 1309 1315 (fontified t) 1315 1324 (face font-lock-variable-name-face fontified t) 1324 1325 (fontified t) 1325 1326 (face font-lock-operator-face fontified t) 1326 1327 (fontified t) 1327 1328 (face (rainbow-delimiters-depth-1-face) fontified t) 1328 1337 (fontified t) 1337 1341 (face font-lock-string-face fontified t) 1341 1359 (fontified t) 1359 1365 (face font-lock-string-face fontified t) 1365 1383 (fontified t) 1383 1389 (face font-lock-string-face fontified t) 1389 1409 (fontified t) 1409 1415 (face font-lock-string-face fontified t) 1415 1432 (fontified t) 1432 1438 (face font-lock-string-face fontified t) 1438 1454 (fontified t) 1454 1459 (face font-lock-string-face fontified t) 1459 1470 (fontified t) 1470 1471 (face (rainbow-delimiters-depth-1-face) fontified t) 1471 1477 (fontified t) 1477 1485 (face font-lock-variable-name-face fontified t) 1485 1486 (fontified t) 1486 1487 (face font-lock-operator-face fontified t) 1487 1489 (fontified t) 1489 1490 (face font-lock-string-face fontified t) 1490 1498 (face nil fontified t) 1498 1499 (face font-lock-string-face fontified t) 1499 1500 (face nil fontified t) 1500 1507 (face nil fontified t) 1507 1513 (face font-lock-string-face fontified t) 1513 1514 (fontified t) 1514 1518 (fontified t) 1518 1526 (face font-lock-variable-name-face fontified t) 1526 1527 (fontified t) 1527 1528 (face font-lock-operator-face fontified t) 1528 1541 (fontified t) 1541 1542 (face (rainbow-delimiters-depth-1-face) fontified t) 1542 1560 (fontified t) 1560 1561 (face (rainbow-delimiters-depth-1-face) fontified t) 1561 1562 (fontified t) 1562 1563 (fontified t) 1563 1567 (fontified t) 1567 1569 (face font-lock-comment-delimiter-face fontified t) 1569 1606 (face font-lock-comment-face fontified t) 1606 1610 (fontified t) 1610 1612 (face font-lock-keyword-face fontified t) 1612 1613 (fontified t) 1613 1616 (face font-lock-keyword-face fontified t) 1616 1631 (fontified t) 1631 1632 (face (rainbow-delimiters-depth-1-face) fontified t) 1632 1640 (fontified t) 1640 1641 (face (rainbow-delimiters-depth-1-face) fontified t) 1641 1643 (fontified t) 1643 1651 (fontified t) 1651 1655 (face font-lock-keyword-face fontified t) 1655 1656 (fontified t) 1656 1660 (face font-lock-builtin-face fontified t) 1660 1661 (face (rainbow-delimiters-depth-1-face) fontified t) 1661 1671 (fontified t) 1671 1674 (face font-lock-string-face fontified t) 1674 1684 (fontified t) 1684 1685 (face font-lock-operator-face fontified t) 1685 1692 (face font-lock-string-face fontified t) 1692 1693 (face (rainbow-delimiters-depth-1-face) fontified t) 1693 1694 (fontified t) 1694 1696 (face font-lock-keyword-face fontified t) 1696 1700 (fontified t) 1700 1721 (fontified t) 1721 1722 (face (rainbow-delimiters-depth-1-face) fontified t) 1722 1742 (fontified t) 1742 1743 (face font-lock-operator-face fontified t) 1743 1758 (fontified t) 1758 1759 (face font-lock-operator-face fontified t) 1759 1764 (face font-lock-constant-face fontified t) 1764 1765 (face (rainbow-delimiters-depth-1-face) fontified t) 1765 1766 (fontified t) 1766 1767 (fontified t) 1767 1771 (fontified t) 1771 1776 (face font-lock-builtin-face fontified t) 1776 1777 (face (rainbow-delimiters-depth-1-face) fontified t) 1777 1778 (fontified t) 1778 1781 (face font-lock-string-face fontified t) 1781 1789 (face nil fontified t) 1789 1791 (face font-lock-string-face fontified t) 1791 1801 (face nil fontified t) 1801 1804 (face font-lock-string-face fontified t) 1804 1810 (face nil fontified t) 1810 1811 (face font-lock-string-face fontified t) 1811 1812 (face (rainbow-delimiters-depth-1-face) fontified t) 1812 1815 (fontified t) 1815 1818 (face font-lock-keyword-face fontified t) 1818 1819 (fontified t) 1819 1835 (face font-lock-function-name-face fontified t) 1835 1836 (face (rainbow-delimiters-depth-1-face) fontified t) 1836 1843 (fontified t) 1843 1847 (face font-lock-builtin-face fontified t) 1847 1856 (fontified t) 1856 1859 (face font-lock-builtin-face fontified t) 1859 1860 (face (rainbow-delimiters-depth-1-face) fontified t) 1860 1861 (fontified t) 1861 1862 (face font-lock-operator-face fontified t) 1862 1863 (face font-lock-operator-face fontified t) 1863 1864 (fontified t) 1864 1867 (face font-lock-builtin-face fontified t) 1867 1873 (fontified t) 1873 1876 (face font-lock-keyword-face fontified t) 1876 1879 (fontified t) 1879 1881 (face font-lock-keyword-face fontified t) 1881 1891 (fontified t) 1891 1892 (face (rainbow-delimiters-depth-1-face) fontified t) 1892 1902 (face font-lock-string-face fontified t) 1902 1904 (fontified t) 1904 1905 (face (rainbow-delimiters-depth-2-face) fontified t) 1905 1906 (face (rainbow-delimiters-depth-2-face) fontified t) 1906 1907 (face (rainbow-delimiters-depth-1-face) fontified t) 1907 1917 (fontified t) 1917 1919 (face font-lock-keyword-face fontified t) 1919 1925 (fontified t) 1925 1926 (face (rainbow-delimiters-depth-1-face) fontified t) 1926 1933 (face font-lock-string-face fontified t) 1933 1934 (face (rainbow-delimiters-depth-1-face) fontified t) 1934 1935 (fontified t) 1935 1937 (face font-lock-operator-face fontified t) 1937 1957 (fontified t) 1957 1963 (face font-lock-keyword-face fontified t) 1963 1969 (fontified t) 1969 1970 (face (rainbow-delimiters-depth-1-face) fontified t) 1970 1979 (face font-lock-string-face fontified t) 1979 1981 (fontified t) 1981 1982 (face (rainbow-delimiters-depth-2-face) fontified t) 1982 1983 (face (rainbow-delimiters-depth-2-face) fontified t) 1983 1984 (face (rainbow-delimiters-depth-1-face) fontified t) 1984 1988 (fontified t) 1988 1989 (face (rainbow-delimiters-depth-1-face) fontified t) 1989 1995 (face font-lock-string-face fontified t) 1995 2002 (fontified t) 2002 2003 (face (rainbow-delimiters-depth-1-face) fontified t) 2003 2008 (fontified t) 2008 2014 (face font-lock-keyword-face fontified t) 2014 2023 (fontified t) 2023 2031 (face font-lock-type-face fontified t) 2031 2032 (face (rainbow-delimiters-depth-1-face) fontified t) 2032 2042 (face font-lock-string-face fontified t) 2042 2058 (fontified t) 2058 2059 (face font-lock-operator-face fontified t) 2059 2076 (fontified t) 2076 2077 (face (rainbow-delimiters-depth-1-face) fontified t) 2077 2078 (fontified t) 2078 2087 (face font-lock-keyword-face fontified t) 2087 2088 (fontified t) 2088 2102 (face font-lock-function-name-face fontified t) 2102 2103 (face (rainbow-delimiters-depth-1-face) fontified t) 2103 2118 (fontified t) 2118 2121 (face font-lock-builtin-face fontified t) 2121 2122 (fontified t) 2122 2123 (face font-lock-operator-face fontified t) 2123 2129 (fontified t) 2129 2130 (face (rainbow-delimiters-depth-2-face) fontified t) 2130 2134 (face font-lock-constant-face fontified t) 2134 2141 (fontified t) 2141 2142 (face font-lock-operator-face fontified t) 2142 2152 (face font-lock-string-face fontified t) 2152 2153 (face (rainbow-delimiters-depth-2-face) fontified t) 2153 2170 (fontified t) 2170 2173 (face font-lock-builtin-face fontified t) 2173 2174 (fontified t) 2174 2175 (face font-lock-operator-face fontified t) 2175 2181 (fontified t) 2181 2182 (face (rainbow-delimiters-depth-2-face) fontified t) 2182 2186 (face font-lock-constant-face fontified t) 2186 2193 (fontified t) 2193 2194 (face font-lock-operator-face fontified t) 2194 2212 (face font-lock-string-face fontified t) 2212 2213 (face (rainbow-delimiters-depth-2-face) fontified t) 2213 2234 (fontified t) 2234 2237 (face font-lock-builtin-face fontified t) 2237 2238 (fontified t) 2238 2239 (face font-lock-operator-face fontified t) 2239 2245 (fontified t) 2245 2246 (face (rainbow-delimiters-depth-2-face) fontified t) 2246 2250 (face font-lock-constant-face fontified t) 2250 2257 (fontified t) 2257 2258 (face font-lock-operator-face fontified t) 2258 2273 (face font-lock-string-face fontified t) 2273 2274 (face (rainbow-delimiters-depth-2-face) fontified t) 2274 2276 (fontified t) 2276 2277 (face (rainbow-delimiters-depth-1-face) fontified t) 2277 2283 (fontified t) 2283 2285 (face font-lock-keyword-face fontified t) 2285 2295 (fontified t) 2295 2297 (face font-lock-operator-face fontified t) 2297 2298 (fontified t) 2298 2309 (face font-lock-string-face fontified t) 2309 2310 (fontified t) 2310 2313 (face font-lock-keyword-face fontified t) 2313 2324 (fontified t) 2324 2326 (face font-lock-operator-face fontified t) 2326 2349 (fontified t) 2349 2355 (face font-lock-keyword-face fontified t) 2355 2374 (fontified t) 2374 2379 (face font-lock-keyword-face fontified t) 2379 2393 (fontified t) 2393 2394 (face (rainbow-delimiters-depth-1-face) fontified t) 2394 2405 (fontified t) 2405 2406 (face font-lock-operator-face fontified t) 2406 2417 (fontified t) 2417 2418 (face font-lock-operator-face fontified t) 2418 2429 (face font-lock-string-face fontified t) 2429 2430 (face (rainbow-delimiters-depth-1-face) fontified t) 2430 2433 (fontified t) 2433 2442 (face font-lock-type-face fontified t) 2442 2443 (face (rainbow-delimiters-depth-1-face) fontified t) 2443 2453 (face font-lock-string-face fontified t) 2453 2454 (face (rainbow-delimiters-depth-1-face) fontified t) 2454 2455 (fontified t) 2455 2464 (face font-lock-keyword-face fontified t) 2464 2465 (fontified t) 2465 2480 (face font-lock-function-name-face fontified t) 2480 2481 (face (rainbow-delimiters-depth-1-face) fontified t) 2481 2532 (fontified t) 2532 2533 (face (rainbow-delimiters-depth-1-face) fontified t) 2533 2539 (fontified t) 2539 2543 (face font-lock-variable-name-face fontified t) 2543 2544 (fontified t) 2544 2545 (face font-lock-operator-face fontified t) 2545 2546 (fontified t) 2546 2551 (face font-lock-keyword-face fontified t) 2551 2564 (fontified t) 2564 2565 (face (rainbow-delimiters-depth-1-face) fontified t) 2565 2566 (face (rainbow-delimiters-depth-1-face) fontified t) 2566 2571 (fontified t) 2571 2574 (face font-lock-keyword-face fontified t) 2574 2581 (fontified t) 2581 2583 (face font-lock-keyword-face fontified t) 2583 2592 (fontified t) 2592 2593 (face (rainbow-delimiters-depth-1-face) fontified t) 2593 2600 (face font-lock-string-face fontified t) 2600 2602 (fontified t) 2602 2603 (face (rainbow-delimiters-depth-2-face) fontified t) 2603 2604 (face (rainbow-delimiters-depth-2-face) fontified t) 2604 2605 (face (rainbow-delimiters-depth-1-face) fontified t) 2605 2615 (fontified t) 2615 2618 (face font-lock-keyword-face fontified t) 2618 2626 (fontified t) 2626 2628 (face font-lock-keyword-face fontified t) 2628 2638 (fontified t) 2638 2639 (face (rainbow-delimiters-depth-1-face) fontified t) 2639 2648 (face font-lock-string-face fontified t) 2648 2650 (fontified t) 2650 2651 (face (rainbow-delimiters-depth-2-face) fontified t) 2651 2652 (face (rainbow-delimiters-depth-2-face) fontified t) 2652 2653 (face (rainbow-delimiters-depth-1-face) fontified t) 2653 2667 (fontified t) 2667 2672 (face font-lock-variable-name-face fontified t) 2672 2673 (fontified t) 2673 2674 (face font-lock-operator-face fontified t) 2674 2685 (fontified t) 2685 2686 (face (rainbow-delimiters-depth-1-face) fontified t) 2686 2693 (face font-lock-string-face fontified t) 2693 2695 (fontified t) 2695 2696 (face (rainbow-delimiters-depth-2-face) fontified t) 2696 2697 (face (rainbow-delimiters-depth-2-face) fontified t) 2697 2698 (face (rainbow-delimiters-depth-1-face) fontified t) 2698 2711 (fontified t) 2711 2714 (face font-lock-keyword-face fontified t) 2714 2719 (fontified t) 2719 2721 (face font-lock-keyword-face fontified t) 2721 2731 (fontified t) 2731 2732 (face (rainbow-delimiters-depth-1-face) fontified t) 2732 2742 (face font-lock-string-face fontified t) 2742 2744 (fontified t) 2744 2745 (face (rainbow-delimiters-depth-2-face) fontified t) 2745 2746 (face (rainbow-delimiters-depth-2-face) fontified t) 2746 2747 (face (rainbow-delimiters-depth-1-face) fontified t) 2747 2765 (fontified t) 2765 2769 (face font-lock-variable-name-face fontified t) 2769 2770 (fontified t) 2770 2771 (face font-lock-operator-face fontified t) 2771 2788 (fontified t) 2788 2789 (face (rainbow-delimiters-depth-1-face) fontified t) 2789 2803 (fontified t) 2803 2804 (face (rainbow-delimiters-depth-2-face) fontified t) 2804 2810 (face font-lock-string-face fontified t) 2810 2812 (fontified t) 2812 2814 (face font-lock-string-face fontified t) 2814 2815 (face (rainbow-delimiters-depth-2-face) fontified t) 2815 2816 (face (rainbow-delimiters-depth-1-face) fontified t) 2816 2858 (fontified t) 2858 2859 (face (rainbow-delimiters-depth-1-face) fontified t) 2859 2881 (fontified t) 2881 2882 (face (rainbow-delimiters-depth-1-face) fontified t) 2882 2887 (fontified t) 2887 2893 (face font-lock-keyword-face fontified t) 2893 2894 (fontified t) 2894 2895 (face (rainbow-delimiters-depth-1-face) fontified t) 2895 2903 (face font-lock-string-face fontified t) 2903 2905 (fontified t) 2905 2909 (face font-lock-string-face fontified t) 2909 2910 (face (rainbow-delimiters-depth-1-face) fontified t) 2910 2913 (fontified t) 2913 2915 (face font-lock-keyword-face fontified t) 2915 2916 (fontified t) 2916 2924 (face font-lock-builtin-face fontified t) 2924 2925 (fontified t) 2925 2927 (face font-lock-operator-face fontified t) 2927 2928 (fontified t) 2928 2938 (face font-lock-string-face fontified t) 2938 2940 (fontified t) 2940 2955 (fontified t) 2955 2956 (face (rainbow-delimiters-depth-1-face) fontified t) 2956 2966 (face font-lock-string-face fontified t) 2966 2972 (fontified t) 2972 2973 (face font-lock-operator-face fontified t) 2973 2982 (face font-lock-string-face fontified t) 2982 2988 (fontified t) 2988 2989 (face font-lock-operator-face fontified t) 2989 2995 (fontified t) 2995 3001 (face font-lock-builtin-face fontified t) 3001 3002 (face font-lock-operator-face fontified t) 3002 3006 (face font-lock-constant-face fontified t)) . 1) (undo-tree-id0 . -576) (undo-tree-id1 . -576) (undo-tree-id2 . -1015) (undo-tree-id3 . -1015) (undo-tree-id4 . -1700) (undo-tree-id5 . -3005) (undo-tree-id6 . -2022) (undo-tree-id7 . -2022) (undo-tree-id8 . -2022) (undo-tree-id9 . -2022) (undo-tree-id10 . -2022) (undo-tree-id11 . -2206) (undo-tree-id12 . -2206) (undo-tree-id13 . -2991) (undo-tree-id14 . -51) (undo-tree-id15 . -2991) (undo-tree-id16 . -154) (undo-tree-id17 . -2330) (undo-tree-id18 . -2991) 3008 (t 27031 30522 944342 220000)) nil (27031 35640 642257 111000) 0 nil])
([nil nil ((4459 . 4460)) nil (27031 35640 642193 381000) 0 nil])
([nil nil ((307 . 308) (t 27031 35640 644534 368000) 293) nil (27031 35657 94610 198000) 0 nil])
([nil nil ((nil rear-nonsticky nil 340 . 341) (nil fontified nil 308 . 341) (308 . 341)) nil (27031 35657 94609 366000) 0 nil])
([nil nil ((307 . 308) 306) nil (27031 35657 94605 405000) 0 nil])
([nil nil ((308 . 316) (t 27031 35657 94472 974000)) nil (27031 35688 743284 612000) 0 nil])
([nil nil ((#("iiiiiiii" 0 8 (fontified t)) . 308) (undo-tree-id73 . -7) (undo-tree-id74 . -7) (undo-tree-id75 . -7) (undo-tree-id76 . -7) 315) nil (27031 35688 743283 760000) 0 nil])
([nil nil ((nil rear-nonsticky nil 832 . 833) (nil fontified nil 739 . 833) (739 . 833) (t 27031 35657 94472 974000)) nil (27031 35688 743281 996000) 0 nil])
([nil nil ((#("INTRO_MESSAGE = \"\"\"Â¡Hola! Soy el Dr. Juan Diego VelÃ¡squez, mÃ©dico y acupunturista ðŸ‘¨â€âš•ï¸
" 0 13 (face font-lock-variable-name-face fontified t) 13 14 (fontified t) 14 15 (face font-lock-operator-face fontified t) 15 16 (fontified t) 16 18 (face font-lock-string-face fontified t) 18 19 (face font-lock-string-face fontified t syntax-table (15)) 19 87 (face font-lock-string-face fontified t)) . 652) (undo-tree-id19 . -87) (undo-tree-id20 . -86) (undo-tree-id21 . 73) (undo-tree-id22 . -13) (undo-tree-id23 . -13) (undo-tree-id24 . -13) (undo-tree-id25 . -65) (undo-tree-id26 . -65) (undo-tree-id27 . -65) (undo-tree-id28 . -65) (undo-tree-id29 . -65) (undo-tree-id30 . -65) (undo-tree-id31 . -65) (undo-tree-id32 . -65) (undo-tree-id33 . -65) (undo-tree-id34 . -65) (undo-tree-id35 . -65) (undo-tree-id36 . -65) (undo-tree-id37 . -65) (undo-tree-id38 . -65) (undo-tree-id39 . -65) (undo-tree-id40 . -65) (undo-tree-id41 . -65) (undo-tree-id42 . -65) (undo-tree-id43 . -65) (undo-tree-id44 . -65) (undo-tree-id45 . -65) (undo-tree-id46 . -65) (undo-tree-id47 . -65) (undo-tree-id48 . -65) (undo-tree-id49 . -65) (undo-tree-id50 . -65) (undo-tree-id51 . -65) (undo-tree-id52 . -65) (undo-tree-id53 . -65) (undo-tree-id54 . -65) (undo-tree-id55 . -65) (undo-tree-id56 . -65) (undo-tree-id57 . -65) (undo-tree-id58 . -65) (undo-tree-id59 . -65) (undo-tree-id60 . -65) (undo-tree-id61 . -65) (undo-tree-id62 . -65) (undo-tree-id63 . -65) (undo-tree-id64 . -65) (undo-tree-id65 . -65) (undo-tree-id66 . -65) (undo-tree-id67 . -65) (undo-tree-id68 . -65) (undo-tree-id69 . -65) (undo-tree-id70 . -65) (undo-tree-id71 . -65) (undo-tree-id72 . -87) 717) nil (27031 35688 743278 308000) 0 nil])
([nil nil ((#("    " 0 4 (fontified t)) . -747) (undo-tree-id79 . -4) 751 (746 . 751) (t 27031 35688 743403 520000) 706) nil (27031 35692 498268 710000) 0 nil])
([nil nil ((#("Vi que estÃ¡s interesado en el programa para fibromialgia. CuÃ©ntame, Â¿hace cuÃ¡nto tiempo tienes el diagnÃ³stico?\"\"\"
" 0 110 (fontified t) 110 111 (face font-lock-string-face fontified t) 111 112 (face font-lock-string-face fontified t) 112 113 (face font-lock-string-face fontified t syntax-table (15)) 113 114 (face font-lock-string-face fontified t)) . 748) (undo-tree-id77 . -113) (undo-tree-id78 . -114)) nil (27031 35692 498264 708000) 0 nil])
([nil nil ((#(")" 0 1 (face (rainbow-delimiters-unmatched-face) fontified t)) . 4387) (undo-tree-id80 . -1) (undo-tree-id81 . -1) (undo-tree-id82 . -1) (t 27031 35692 498399 251000)) nil (27031 35944 551145 570000) 0 nil])
([nil nil ((#("_" 0 1 (fontified t)) . 4252) (t 27031 35944 551470 449000)) nil (27031 35988 354155 256000) 0 nil])
([nil nil ((#("M" 0 1 (fontified t)) . 4252)) nil (27031 35988 354154 578000) 0 nil])
([nil nil ((#("E" 0 1 (fontified t)) . 4252)) nil (27031 35988 354153 958000) 0 nil])
([nil nil ((#("S" 0 1 (fontified t)) . 4252)) nil (27031 35988 354153 545000) 0 nil])
([nil nil ((#("S" 0 1 (fontified t)) . 4252)) nil (27031 35988 354152 954000) 0 nil])
([nil nil ((#("A" 0 1 (fontified t)) . 4252)) nil (27031 35988 354152 312000) 0 nil])
([nil nil ((#("G" 0 1 (fontified t)) . 4252)) nil (27031 35988 354151 684000) 0 nil])
([nil nil ((#("E" 0 1 (fontified t)) . 4252)) nil (27031 35988 354147 435000) 0 nil])
([nil nil ((4276 . 4296) (#("  " 0 2 (fontified nil)) . 4276) (4275 . 4278) (4270 . 4275) (#("    " 0 4 (fontified t)) . -4270) (undo-tree-id87 . -4) 4274 (4253 . 4274) (t 27031 35988 354842 651000) 4191) nil (27031 36003 467879 292000) 0 nil])
([nil nil ((nil rear-nonsticky nil 4378 . 4379) (nil fontified nil 4296 . 4379) (4296 . 4379) 4295) nil (27031 36003 467876 376000) 0 nil])
([nil nil ((4292 . 4296) (#("    " 0 4 (fontified t)) . -4292) (undo-tree-id83 . -4) (undo-tree-id84 . -4) (undo-tree-id85 . -4) 4296 (#("                    " 0 20 (fontified t)) . -4296) (undo-tree-id86 . -20) 4316) nil (27031 36003 467873 471000) 0 nil])
([nil nil ((#("if is_first_contact(phone):
    background_tasks.add_task(send_whatsapp_message, phone, INTRO)
" 0 2 (face font-lock-keyword-face fontified t) 2 19 (fontified t) 19 20 (face (rainbow-delimiters-depth-1-face) fontified t) 20 25 (fontified t) 25 26 (face (rainbow-delimiters-depth-1-face) fontified t) 26 27 (fontified t) 27 28 (fontified t) 28 57 (fontified t) 57 58 (face (rainbow-delimiters-depth-1-face) fontified t) 58 93 (fontified t) 93 94 (face (rainbow-delimiters-depth-1-face) fontified t rear-nonsticky t) 94 95 (fontified t)) . 652) (undo-tree-id88 . -39) (undo-tree-id89 . -94) (undo-tree-id90 . -11) (undo-tree-id91 . -39) (undo-tree-id92 . -28) (undo-tree-id93 . -28) (undo-tree-id94 . -11) (undo-tree-id95 . -11) (undo-tree-id96 . -11) (undo-tree-id97 . -11) (undo-tree-id98 . -11) (undo-tree-id99 . -11) (undo-tree-id100 . -11) (undo-tree-id101 . -11) (undo-tree-id102 . -11) (undo-tree-id103 . -11) (undo-tree-id104 . -11) (undo-tree-id105 . -11) (undo-tree-id106 . -11) (undo-tree-id107 . -11) (undo-tree-id108 . -11) (undo-tree-id109 . -11) (undo-tree-id110 . -11) (undo-tree-id111 . -11) (undo-tree-id112 . -11) (undo-tree-id113 . -11) (undo-tree-id114 . -11) (undo-tree-id115 . -11) (undo-tree-id116 . -11) (undo-tree-id117 . -11) (undo-tree-id118 . -11) (undo-tree-id119 . -11) (undo-tree-id120 . -11) (undo-tree-id121 . -11) (undo-tree-id122 . -11) (undo-tree-id123 . -11) (undo-tree-id124 . -11) (undo-tree-id125 . -11) (undo-tree-id126 . -11) (undo-tree-id127 . -11) (undo-tree-id128 . -11) (undo-tree-id129 . -11) (undo-tree-id130 . -11) (undo-tree-id131 . -11) (undo-tree-id132 . -11) (undo-tree-id133 . -11) (undo-tree-id134 . -11) (undo-tree-id135 . -11) (undo-tree-id136 . -11) (undo-tree-id137 . -11) (undo-tree-id138 . -11) (undo-tree-id139 . -11) (undo-tree-id140 . -11) (undo-tree-id141 . -11) (undo-tree-id142 . -11) (undo-tree-id143 . -11) (undo-tree-id144 . -11) (undo-tree-id145 . -11) (undo-tree-id146 . -11) (undo-tree-id147 . -11) (undo-tree-id148 . -11) (undo-tree-id149 . -11) (undo-tree-id150 . -11) (undo-tree-id151 . -11) (undo-tree-id152 . -11) (undo-tree-id153 . -11) (undo-tree-id154 . -11) (undo-tree-id155 . -11) (undo-tree-id156 . -11) (undo-tree-id157 . -11) (undo-tree-id158 . -11) (undo-tree-id159 . -11) (undo-tree-id160 . -11) (undo-tree-id161 . -28) (undo-tree-id162 . -39) (undo-tree-id163 . -39) (undo-tree-id164 . -39) (undo-tree-id165 . -39) (undo-tree-id166 . -39) (undo-tree-id167 . -39) (undo-tree-id168 . -39) (undo-tree-id169 . -39) (undo-tree-id170 . -39) (undo-tree-id171 . -39) (undo-tree-id172 . -39) (undo-tree-id173 . -39) (undo-tree-id174 . -39) (undo-tree-id175 . -39) (undo-tree-id176 . -39) (undo-tree-id177 . -39) (undo-tree-id178 . -39) (undo-tree-id179 . -39) (undo-tree-id180 . -39) (undo-tree-id181 . -39) (undo-tree-id182 . -39) (undo-tree-id183 . -39) (undo-tree-id184 . -39) (undo-tree-id185 . -39) (undo-tree-id186 . -39) (undo-tree-id187 . -39) (undo-tree-id188 . -39) (undo-tree-id189 . -11) (undo-tree-id190 . -39) (undo-tree-id191 . -39) (undo-tree-id192 . -39) (undo-tree-id193 . -39) (undo-tree-id194 . -39) (undo-tree-id195 . -95) 691 (t 27031 36003 468979 325000)) nil (27031 36016 446330 452000) 0 nil])
([nil nil ((#("
" 0 1 (fontified t)) . 653) (undo-tree-id196 . -1) (t 27031 36016 447099 754000)) nil (27031 36017 921347 896000) 0 nil])
([nil nil ((1 . 50) (#("\"\"\"fibrobot â€” WhatsApp Business webhook that logs incoming messages.\"\"\"
import os
import json
import httpx
from datetime import datetime
from dotenv import load_dotenv
from fastapi import FastAPI, Request, Query, HTTPException, BackgroundTasks
from fastapi.responses import PlainTextResponse
import uvicorn

from messages import INTRO, PRICE

load_dotenv(\".secrets\")

WHATSAPP_API_KEY = os.getenv(\"WHATSAPP_API_KEY\", \"\")
PHONE_NUMBER_ID = os.getenv(\"PHONE_NUMBER_ID\", \"\")
VERIFY_TOKEN = os.getenv(\"VERIFY_TOKEN\", \"fibrobot_verify\")
LOGS_DIR = os.path.join(os.path.dirname(__file__), \"logs\")
SEEN_DIR = os.path.join(os.path.dirname(__file__), \"seen\")


app = FastAPI(title=\"fibrobot\")


@app.middleware(\"http\")
async def add_ngrok_header(request: Request, call_next):
    response = await call_next(request)
    response.headers[\"ngrok-skip-browser-warning\"] = \"true\"
    return response


def is_first_contact(phone: str) -> bool:
    \"\"\"Returns True if this phone number has never messaged before.\"\"\"
    os.makedirs(SEEN_DIR, exist_ok=True)
    filepath = os.path.join(SEEN_DIR, f\"{phone}.seen\")
    if os.path.exists(filepath):
        return False
    open(filepath, \"w\").close()
    return True


async def send_whatsapp_message(to: str, message: str):
    \"\"\"Send a WhatsApp message via the Meta API.\"\"\"
    url = f\"https://graph.facebook.com/v19.0/{PHONE_NUMBER_ID}/messages\"
    headers = {
        \"Authorization\": f\"Bearer {WHATSAPP_API_KEY}\",
        \"Content-Type\": \"application/json\",
    }
    payload = {
        \"messaging_product\": \"whatsapp\",
        \"to\": to,
        \"type\": \"text\",
        \"text\": {\"body\": message},
    }
    async with httpx.AsyncClient() as client:
        r = await client.post(url, headers=headers, json=payload)
        print(f\"ðŸ“¤ Sent to {to}: {r.status_code}\")
        return r.json()


def log_message(msg: dict, contact_name: str = \"\"):
    \"\"\"Write a message to a log file in logs/.\"\"\"
    os.makedirs(LOGS_DIR, exist_ok=True)
    sender = contact_name or msg.get(\"from\", \"unknown\")
    ts = msg.get(\"timestamp\", \"0\")
    msg_id = msg.get(\"id\", ts)

    try:
        time_str = datetime.fromtimestamp(int(ts)).strftime(\"%Y-%m-%d %H:%M:%S\")
    except Exception:
        time_str = ts

    mtype = msg.get(\"type\", \"unknown\")
    body = \"\"
    if mtype == \"text\":
        body = msg.get(\"text\", {}).get(\"body\", \"\")
    elif mtype == \"audio\":
        body = \"[voice note]\"

    log_entry = {
        \"id\": msg_id,
        \"from\": sender,
        \"time\": time_str,
        \"type\": mtype,
        \"body\": body,
        \"raw\": msg,
    }

    filename = f\"{msg_id}_{sender}.json\"
    filepath = os.path.join(LOGS_DIR, filename)

    if not os.path.exists(filepath):
        with open(filepath, \"w\", encoding=\"utf-8\") as f:
            json.dump(log_entry, f, indent=2, ensure_ascii=False)

    print(f\"ðŸ“¨ {sender} ({time_str}): {body}\")


def get_contact_name(value: dict, phone: str) -> str:
    for c in value.get(\"contacts\", []):
        if c.get(\"wa_id\") == phone:
            return c.get(\"profile\", {}).get(\"name\", phone)
    return phone


@app.get(\"/webhook\", response_class=PlainTextResponse)
async def verify_webhook(
    hub_mode: str = Query(None, alias=\"hub.mode\"),
    hub_token: str = Query(None, alias=\"hub.verify_token\"),
    hub_challenge: str = Query(None, alias=\"hub.challenge\"),
):
    if hub_mode == \"subscribe\" and hub_token == VERIFY_TOKEN:
        return hub_challenge
    raise HTTPException(status_code=403, detail=\"Forbidden\")


@app.post(\"/webhook\")
async def receive_message(request: Request, background_tasks: BackgroundTasks):
    data = await request.json()
    for entry in data.get(\"entry\", []):
        for change in entry.get(\"changes\", []):
            value = change.get(\"value\", {})
            for msg in value.get(\"messages\", []):
                phone = msg.get(\"from\", \"\")
                name = get_contact_name(value, phone)
                background_tasks.add_task(log_message, msg, name)

                # Send intro only on first contact
                if is_first_contact(phone):
                    background_tasks.add_task(send_whatsapp_message, phone, INTRO)
                else:
                    background_tasks.add_task(send_whatsapp_message, phone, INTRO)


    return {\"status\": \"ok\"}


if __name__ == \"__main__\":
    uvicorn.run(\"main:app\", host=\"0.0.0.0\", port=3000, reload=True" 0 2 (face font-lock-doc-face fontified t) 2 3 (face font-lock-doc-face syntax-table (15) fontified t) 3 68 (face font-lock-doc-face fontified t) 68 69 (face font-lock-doc-face syntax-table (15) fontified t) 69 71 (face font-lock-doc-face fontified t) 71 72 (fontified t) 72 78 (face font-lock-keyword-face fontified t) 78 82 (fontified t) 82 88 (face font-lock-keyword-face fontified t) 88 94 (fontified t) 94 100 (face font-lock-keyword-face fontified t) 100 107 (fontified t) 107 111 (face font-lock-keyword-face fontified t) 111 121 (fontified t) 121 127 (face font-lock-keyword-face fontified t) 127 137 (fontified t) 137 141 (face font-lock-keyword-face fontified t) 141 149 (fontified t) 149 155 (face font-lock-keyword-face fontified t) 155 168 (fontified t) 168 172 (face font-lock-keyword-face fontified t) 172 181 (fontified t) 181 187 (face font-lock-keyword-face fontified t) 187 244 (fontified t) 244 248 (face font-lock-keyword-face fontified t) 248 267 (fontified t) 267 273 (face font-lock-keyword-face fontified t) 273 292 (fontified t) 292 298 (face font-lock-keyword-face fontified t) 298 306 (fontified t) 306 307 (fontified t) 307 308 (fontified t) 308 312 (face font-lock-keyword-face fontified t) 312 322 (fontified t) 322 328 (face font-lock-keyword-face fontified t) 328 340 (fontified t) 340 341 (fontified t rear-nonsticky t) 341 342 (fontified t) 342 354 (fontified t) 354 355 (face (rainbow-delimiters-depth-1-face) fontified t) 355 365 (face font-lock-string-face fontified t) 365 366 (face (rainbow-delimiters-depth-1-face) fontified t) 366 368 (fontified t) 368 384 (face font-lock-variable-name-face fontified t) 384 385 (fontified t) 385 386 (face font-lock-operator-face fontified t) 386 396 (fontified t) 396 397 (face (rainbow-delimiters-depth-1-face) fontified t) 397 415 (face font-lock-string-face fontified t) 415 417 (fontified t) 417 419 (face font-lock-string-face fontified t) 419 420 (face (rainbow-delimiters-depth-1-face) fontified t) 420 421 (fontified t) 421 436 (face font-lock-variable-name-face fontified t) 436 437 (fontified t) 437 438 (face font-lock-operator-face fontified t) 438 448 (fontified t) 448 449 (face (rainbow-delimiters-depth-1-face) fontified t) 449 466 (face font-lock-string-face fontified t) 466 468 (fontified t) 468 470 (face font-lock-string-face fontified t) 470 471 (face (rainbow-delimiters-depth-1-face) fontified t) 471 472 (fontified t) 472 484 (face font-lock-variable-name-face fontified t) 484 485 (fontified t) 485 486 (face font-lock-operator-face fontified t) 486 496 (fontified t) 496 497 (face (rainbow-delimiters-depth-1-face) fontified t) 497 511 (face font-lock-string-face fontified t) 511 513 (fontified t) 513 530 (face font-lock-string-face fontified t) 530 531 (face (rainbow-delimiters-depth-1-face) fontified t) 531 532 (fontified t) 532 540 (face font-lock-variable-name-face fontified t) 540 541 (fontified t) 541 542 (face font-lock-operator-face fontified t) 542 555 (fontified t) 555 556 (face (rainbow-delimiters-depth-1-face) fontified t) 556 571 (fontified t) 571 572 (face (rainbow-delimiters-depth-2-face) fontified t) 572 580 (fontified t) 580 581 (face (rainbow-delimiters-depth-2-face) fontified t) 581 583 (fontified t) 583 589 (face font-lock-string-face fontified t) 589 590 (face (rainbow-delimiters-depth-1-face) fontified t) 590 591 (fontified t) 591 599 (face font-lock-variable-name-face fontified t) 599 600 (fontified t) 600 601 (face font-lock-operator-face fontified t) 601 614 (fontified t) 614 615 (face (rainbow-delimiters-depth-1-face) fontified t) 615 630 (fontified t) 630 631 (face (rainbow-delimiters-depth-2-face) fontified t) 631 639 (fontified t) 639 640 (face (rainbow-delimiters-depth-2-face) fontified t) 640 642 (fontified t) 642 648 (face font-lock-string-face fontified t) 648 649 (face (rainbow-delimiters-depth-1-face) fontified t) 649 651 (fontified t) 651 652 (fontified t) 652 655 (face font-lock-variable-name-face fontified t) 655 656 (fontified t) 656 657 (face font-lock-operator-face fontified t) 657 665 (fontified t) 665 666 (face (rainbow-delimiters-depth-1-face) fontified t) 666 671 (fontified t) 671 672 (face font-lock-operator-face fontified t) 672 682 (face font-lock-string-face fontified t) 682 683 (face (rainbow-delimiters-depth-1-face) fontified t) 683 684 (fontified t) 684 686 (fontified t) 686 701 (face font-lock-type-face fontified t) 701 702 (face (rainbow-delimiters-depth-1-face) fontified t) 702 708 (face font-lock-string-face fontified t) 708 709 (face (rainbow-delimiters-depth-1-face) fontified t) 709 710 (fontified t) 710 719 (face font-lock-keyword-face fontified t) 719 720 (fontified t) 720 736 (face font-lock-function-name-face fontified t) 736 737 (face (rainbow-delimiters-depth-1-face) fontified t) 737 764 (fontified t) 764 765 (face (rainbow-delimiters-depth-1-face) fontified t) 765 771 (fontified t) 771 779 (face font-lock-variable-name-face fontified t) 779 780 (fontified t) 780 781 (face font-lock-operator-face fontified t) 781 782 (fontified t) 782 787 (face font-lock-keyword-face fontified t) 787 797 (fontified t) 797 798 (face (rainbow-delimiters-depth-1-face) fontified t) 798 805 (fontified t) 805 806 (face (rainbow-delimiters-depth-1-face) fontified t) 806 820 (fontified t) 820 827 (face font-lock-variable-name-face fontified t) 827 828 (face (rainbow-delimiters-depth-1-face) fontified t) 828 856 (face font-lock-string-face fontified t) 856 857 (face (rainbow-delimiters-depth-1-face) fontified t) 857 858 (fontified t) 858 859 (face font-lock-operator-face fontified t) 859 860 (fontified t) 860 866 (face font-lock-string-face fontified t) 866 871 (fontified t) 871 877 (face font-lock-keyword-face fontified t) 877 889 (fontified t) 889 892 (face font-lock-keyword-face fontified t) 892 893 (fontified t) 893 909 (face font-lock-function-name-face fontified t) 909 910 (face (rainbow-delimiters-depth-1-face) fontified t) 910 917 (fontified t) 917 920 (face font-lock-builtin-face fontified t) 920 921 (face (rainbow-delimiters-depth-1-face) fontified t) 921 922 (fontified t) 922 923 (face font-lock-operator-face fontified t) 923 924 (face font-lock-operator-face fontified t) 924 925 (fontified t) 925 929 (face font-lock-builtin-face fontified t) 929 935 (fontified t) 935 936 (face font-lock-doc-face fontified t) 936 937 (face font-lock-doc-face fontified t) 937 938 (face font-lock-doc-face fontified t syntax-table (15)) 938 946 (face font-lock-doc-face fontified t) 946 950 (face font-lock-doc-face fontified t) 950 951 (face font-lock-doc-face fontified t) 951 953 (face font-lock-doc-face fontified t) 953 998 (face font-lock-doc-face fontified t) 998 999 (face font-lock-doc-face fontified t syntax-table (15)) 999 1000 (face font-lock-doc-face fontified t) 1000 1001 (face font-lock-doc-face fontified t) 1001 1017 (fontified t) 1017 1018 (face (rainbow-delimiters-depth-1-face) fontified t) 1018 1036 (fontified t) 1036 1037 (face font-lock-operator-face fontified t) 1037 1041 (face font-lock-constant-face fontified t) 1041 1042 (face (rainbow-delimiters-depth-1-face) fontified t) 1042 1047 (fontified t) 1047 1055 (face font-lock-variable-name-face fontified t) 1055 1056 (fontified t) 1056 1057 (face font-lock-operator-face fontified t) 1057 1070 (fontified t) 1070 1071 (face (rainbow-delimiters-depth-1-face) fontified t) 1071 1082 (fontified t) 1082 1083 (face font-lock-string-face fontified t) 1083 1090 (face nil fontified t) 1090 1096 (face font-lock-string-face fontified t) 1096 1097 (face (rainbow-delimiters-depth-1-face) fontified t) 1097 1102 (fontified t) 1102 1104 (face font-lock-keyword-face fontified t) 1104 1119 (fontified t) 1119 1120 (face (rainbow-delimiters-depth-1-face) fontified t) 1120 1128 (fontified t) 1128 1129 (face (rainbow-delimiters-depth-1-face) fontified t) 1129 1139 (fontified t) 1139 1145 (face font-lock-keyword-face fontified t) 1145 1146 (fontified t) 1146 1151 (face font-lock-constant-face fontified t) 1151 1156 (fontified t) 1156 1160 (face font-lock-builtin-face fontified t) 1160 1161 (face (rainbow-delimiters-depth-1-face) fontified t) 1161 1171 (fontified t) 1171 1174 (face font-lock-string-face fontified t) 1174 1175 (face (rainbow-delimiters-depth-1-face) fontified t) 1175 1181 (fontified t) 1181 1182 (face (rainbow-delimiters-depth-1-face) fontified t) 1182 1183 (face (rainbow-delimiters-depth-1-face) fontified t) 1183 1188 (fontified t) 1188 1194 (face font-lock-keyword-face fontified t) 1194 1195 (fontified t) 1195 1199 (face font-lock-constant-face fontified t) 1199 1202 (fontified t) 1202 1211 (face font-lock-keyword-face fontified t) 1211 1212 (fontified t) 1212 1233 (face font-lock-function-name-face fontified t) 1233 1234 (face (rainbow-delimiters-depth-1-face) fontified t) 1234 1238 (fontified t) 1238 1241 (face font-lock-builtin-face fontified t) 1241 1252 (fontified t) 1252 1255 (face font-lock-builtin-face fontified t) 1255 1256 (face (rainbow-delimiters-depth-1-face) fontified t) 1256 1262 (fontified t) 1262 1263 (face font-lock-doc-face fontified t) 1263 1264 (face font-lock-doc-face fontified t) 1264 1265 (face font-lock-doc-face syntax-table (15) fontified t) 1265 1306 (face font-lock-doc-face fontified t) 1306 1307 (face font-lock-doc-face syntax-table (15) fontified t) 1307 1308 (face font-lock-doc-face fontified t) 1308 1309 (face font-lock-doc-face fontified t) 1309 1314 (fontified t) 1314 1317 (face font-lock-variable-name-face fontified t) 1317 1318 (fontified t) 1318 1319 (face font-lock-operator-face fontified t) 1319 1321 (fontified t) 1321 1333 (face font-lock-string-face fontified t) 1333 1355 (face font-lock-string-face fontified t) 1355 1372 (face nil fontified t) 1372 1382 (face font-lock-string-face fontified t) 1382 1383 (fontified t) 1383 1387 (fontified t) 1387 1394 (face font-lock-variable-name-face fontified t) 1394 1395 (fontified t) 1395 1396 (face font-lock-operator-face fontified t) 1396 1397 (fontified t) 1397 1398 (face (rainbow-delimiters-depth-1-face) fontified t) 1398 1407 (fontified t) 1407 1422 (face font-lock-string-face fontified t) 1422 1425 (fontified t) 1425 1433 (face font-lock-string-face fontified t) 1433 1451 (face nil fontified t) 1451 1452 (face font-lock-string-face fontified t) 1452 1462 (fontified t) 1462 1476 (face font-lock-string-face fontified t) 1476 1478 (fontified t) 1478 1496 (face font-lock-string-face fontified t) 1496 1502 (fontified t) 1502 1503 (face (rainbow-delimiters-depth-1-face) fontified t) 1503 1508 (fontified t) 1508 1515 (face font-lock-variable-name-face fontified t) 1515 1516 (fontified t) 1516 1517 (face font-lock-operator-face fontified t) 1517 1518 (fontified t) 1518 1519 (face (rainbow-delimiters-depth-1-face) fontified t) 1519 1528 (fontified t) 1528 1547 (face font-lock-string-face fontified t) 1547 1549 (fontified t) 1549 1559 (face font-lock-string-face fontified t) 1559 1569 (fontified t) 1569 1573 (face font-lock-string-face fontified t) 1573 1587 (fontified t) 1587 1593 (face font-lock-string-face fontified t) 1593 1595 (fontified t) 1595 1601 (face font-lock-string-face fontified t) 1601 1606 (fontified t) 1606 1611 (fontified t) 1611 1617 (face font-lock-string-face fontified t) 1617 1619 (fontified t) 1619 1620 (face (rainbow-delimiters-depth-2-face) fontified t) 1620 1626 (face font-lock-string-face fontified t) 1626 1635 (fontified t) 1635 1636 (face (rainbow-delimiters-depth-2-face) fontified t) 1636 1638 (fontified t) 1638 1642 (fontified t) 1642 1643 (face (rainbow-delimiters-depth-1-face) fontified t) 1643 1648 (fontified t) 1648 1658 (face font-lock-keyword-face fontified t) 1658 1676 (fontified t) 1676 1677 (face (rainbow-delimiters-depth-1-face) fontified t) 1677 1678 (face (rainbow-delimiters-depth-1-face) fontified t) 1678 1679 (fontified t) 1679 1681 (face font-lock-keyword-face fontified t) 1681 1698 (fontified t) 1698 1699 (face font-lock-variable-name-face fontified t) 1699 1700 (fontified t) 1700 1701 (face font-lock-operator-face fontified t) 1701 1702 (fontified t) 1702 1707 (face font-lock-keyword-face fontified t) 1707 1719 (fontified t) 1719 1720 (face (rainbow-delimiters-depth-1-face) fontified t) 1720 1732 (fontified t) 1732 1733 (face font-lock-operator-face fontified t) 1733 1746 (fontified t) 1746 1747 (face font-lock-operator-face fontified t) 1747 1754 (fontified t) 1754 1755 (face (rainbow-delimiters-depth-1-face) fontified t) 1755 1764 (fontified t) 1764 1769 (face font-lock-builtin-face fontified t) 1769 1770 (face (rainbow-delimiters-depth-1-face) fontified t) 1770 1771 (fontified t) 1771 1782 (face font-lock-string-face fontified t) 1782 1786 (face nil fontified t) 1786 1788 (face font-lock-string-face fontified t) 1788 1803 (face nil fontified t) 1803 1804 (face font-lock-string-face fontified t) 1804 1805 (face (rainbow-delimiters-depth-1-face) fontified t) 1805 1814 (fontified t) 1814 1820 (face font-lock-keyword-face fontified t) 1820 1827 (fontified t) 1827 1828 (face (rainbow-delimiters-depth-1-face) fontified t) 1828 1829 (face (rainbow-delimiters-depth-1-face) fontified t) 1829 1832 (fontified t) 1832 1835 (face font-lock-keyword-face fontified t) 1835 1836 (fontified t) 1836 1847 (face font-lock-function-name-face fontified t) 1847 1848 (face (rainbow-delimiters-depth-1-face) fontified t) 1848 1853 (fontified t) 1853 1857 (face font-lock-builtin-face fontified t) 1857 1873 (fontified t) 1873 1876 (face font-lock-builtin-face fontified t) 1876 1877 (fontified t) 1877 1878 (face font-lock-operator-face fontified t) 1878 1879 (fontified t) 1879 1881 (face font-lock-string-face fontified t) 1881 1882 (face (rainbow-delimiters-depth-1-face) fontified t) 1882 1888 (fontified t) 1888 1889 (face font-lock-doc-face fontified t) 1889 1890 (face font-lock-doc-face fontified t) 1890 1891 (face font-lock-doc-face syntax-table (15) fontified t) 1891 1916 (face font-lock-doc-face fontified t) 1916 1920 (face font-lock-doc-face fontified t) 1920 1921 (face font-lock-doc-face fontified t) 1921 1923 (face font-lock-doc-face fontified t) 1923 1928 (face font-lock-doc-face fontified t) 1928 1929 (face font-lock-doc-face fontified t) 1929 1930 (face font-lock-doc-face fontified t) 1930 1931 (face font-lock-doc-face syntax-table (15) fontified t) 1931 1932 (face font-lock-doc-face fontified t) 1932 1933 (face font-lock-doc-face fontified t) 1933 1949 (fontified t) 1949 1950 (face (rainbow-delimiters-depth-1-face) fontified t) 1950 1968 (fontified t) 1968 1969 (face font-lock-operator-face fontified t) 1969 1970 (face font-lock-constant-face fontified t) 1970 1973 (face font-lock-constant-face fontified t) 1973 1974 (face (rainbow-delimiters-depth-1-face) fontified t) 1974 1975 (fontified t) 1975 1979 (fontified t) 1979 1985 (face font-lock-variable-name-face fontified t) 1985 1986 (fontified t) 1986 1987 (face font-lock-operator-face fontified t) 1987 2001 (fontified t) 2001 2003 (face font-lock-keyword-face fontified t) 2003 2011 (fontified t) 2011 2012 (face (rainbow-delimiters-depth-1-face) fontified t) 2012 2018 (face font-lock-string-face fontified t) 2018 2020 (fontified t) 2020 2029 (face font-lock-string-face fontified t) 2029 2030 (face (rainbow-delimiters-depth-1-face) fontified t) 2030 2035 (fontified t) 2035 2036 (face font-lock-variable-name-face fontified t) 2036 2037 (face font-lock-variable-name-face fontified t) 2037 2038 (fontified t) 2038 2039 (face font-lock-operator-face fontified t) 2039 2047 (fontified t) 2047 2048 (face (rainbow-delimiters-depth-1-face) fontified t) 2048 2059 (face font-lock-string-face fontified t) 2059 2061 (fontified t) 2061 2064 (face font-lock-string-face fontified t) 2064 2065 (face (rainbow-delimiters-depth-1-face) fontified t) 2065 2066 (fontified t) 2066 2070 (fontified t) 2070 2076 (face font-lock-variable-name-face fontified t) 2076 2077 (fontified t) 2077 2078 (face font-lock-operator-face fontified t) 2078 2086 (fontified t) 2086 2087 (face (rainbow-delimiters-depth-1-face) fontified t) 2087 2091 (face font-lock-string-face fontified t) 2091 2095 (fontified t) 2095 2096 (face (rainbow-delimiters-depth-1-face) fontified t) 2096 2102 (fontified t) 2102 2105 (face font-lock-keyword-face fontified t) 2105 2115 (fontified t) 2115 2123 (face font-lock-variable-name-face fontified t) 2123 2124 (fontified t) 2124 2125 (face font-lock-operator-face fontified t) 2125 2148 (fontified t) 2148 2149 (face (rainbow-delimiters-depth-1-face) fontified t) 2149 2151 (face font-lock-builtin-face fontified t) 2151 2152 (face font-lock-builtin-face fontified t) 2152 2153 (face (rainbow-delimiters-depth-2-face) fontified t) 2153 2155 (fontified t) 2155 2156 (face (rainbow-delimiters-depth-2-face) fontified t) 2156 2157 (face (rainbow-delimiters-depth-1-face) fontified t) 2157 2166 (fontified t) 2166 2167 (face (rainbow-delimiters-depth-1-face) fontified t) 2167 2184 (face font-lock-string-face fontified t) 2184 2186 (fontified t face font-lock-string-face) 2186 2187 (fontified t face (rainbow-delimiters-depth-1-face)) 2187 2188 (fontified t) 2188 2192 (fontified t) 2192 2198 (face font-lock-keyword-face fontified t) 2198 2199 (fontified t) 2199 2208 (face font-lock-type-face fontified t) 2208 2218 (fontified t) 2218 2226 (face font-lock-variable-name-face fontified t) 2226 2227 (fontified t) 2227 2228 (face font-lock-operator-face fontified t) 2228 2237 (fontified t) 2237 2242 (face font-lock-variable-name-face fontified t) 2242 2243 (fontified t) 2243 2244 (face font-lock-operator-face fontified t) 2244 2252 (fontified t) 2252 2253 (face (rainbow-delimiters-depth-1-face) fontified t) 2253 2259 (face font-lock-string-face fontified t) 2259 2261 (fontified t) 2261 2270 (face font-lock-string-face fontified t) 2270 2271 (face (rainbow-delimiters-depth-1-face) fontified t) 2271 2276 (fontified t) 2276 2280 (face font-lock-variable-name-face fontified t) 2280 2281 (fontified t) 2281 2282 (face font-lock-operator-face fontified t) 2282 2283 (fontified t) 2283 2285 (face font-lock-string-face fontified t) 2285 2290 (fontified t) 2290 2292 (face font-lock-keyword-face fontified t) 2292 2299 (fontified t) 2299 2301 (face font-lock-operator-face fontified t) 2301 2302 (fontified t) 2302 2308 (face font-lock-string-face fontified t) 2308 2318 (fontified t) 2318 2322 (face font-lock-variable-name-face fontified t) 2322 2323 (fontified t) 2323 2324 (face font-lock-operator-face fontified t) 2324 2332 (fontified t) 2332 2333 (face (rainbow-delimiters-depth-1-face) fontified t) 2333 2339 (face font-lock-string-face fontified t) 2339 2341 (fontified t) 2341 2342 (face (rainbow-delimiters-depth-2-face) fontified t) 2342 2343 (face (rainbow-delimiters-depth-2-face) fontified t) 2343 2344 (face (rainbow-delimiters-depth-1-face) fontified t) 2344 2348 (fontified t) 2348 2349 (face (rainbow-delimiters-depth-1-face) fontified t) 2349 2355 (face font-lock-string-face fontified t) 2355 2357 (fontified t) 2357 2359 (face font-lock-string-face fontified t) 2359 2360 (face (rainbow-delimiters-depth-1-face) fontified t) 2360 2365 (fontified t) 2365 2369 (face font-lock-keyword-face fontified t) 2369 2376 (fontified t) 2376 2378 (face font-lock-operator-face fontified t) 2378 2379 (fontified t) 2379 2386 (face font-lock-string-face fontified t) 2386 2396 (fontified t) 2396 2400 (face font-lock-variable-name-face fontified t) 2400 2401 (fontified t) 2401 2402 (face font-lock-operator-face fontified t) 2402 2403 (fontified t) 2403 2417 (face font-lock-string-face fontified t) 2417 2423 (fontified t) 2423 2432 (face font-lock-variable-name-face fontified t) 2432 2433 (fontified t) 2433 2434 (face font-lock-operator-face fontified t) 2434 2435 (fontified t) 2435 2436 (face (rainbow-delimiters-depth-1-face) fontified t) 2436 2445 (fontified t) 2445 2449 (face font-lock-string-face fontified t) 2449 2467 (fontified t) 2467 2473 (face font-lock-string-face fontified t) 2473 2491 (fontified t) 2491 2497 (face font-lock-string-face fontified t) 2497 2517 (fontified t) 2517 2523 (face font-lock-string-face fontified t) 2523 2540 (fontified t) 2540 2546 (face font-lock-string-face fontified t) 2546 2562 (fontified t) 2562 2567 (face font-lock-string-face fontified t) 2567 2578 (fontified t) 2578 2579 (face (rainbow-delimiters-depth-1-face) fontified t) 2579 2580 (fontified t) 2580 2581 (fontified t) 2581 2585 (fontified t) 2585 2593 (face font-lock-variable-name-face fontified t) 2593 2594 (fontified t) 2594 2595 (face font-lock-operator-face fontified t) 2595 2597 (fontified t) 2597 2598 (face font-lock-string-face fontified t) 2598 2606 (face nil fontified t) 2606 2607 (face font-lock-string-face fontified t) 2607 2615 (face nil fontified t) 2615 2621 (face font-lock-string-face fontified t) 2621 2622 (fontified t) 2622 2626 (fontified t) 2626 2634 (face font-lock-variable-name-face fontified t) 2634 2635 (fontified t) 2635 2636 (face font-lock-operator-face fontified t) 2636 2649 (fontified t) 2649 2650 (face (rainbow-delimiters-depth-1-face) fontified t) 2650 2668 (fontified t) 2668 2669 (face (rainbow-delimiters-depth-1-face) fontified t) 2669 2670 (fontified t) 2670 2671 (fontified t) 2671 2675 (fontified t) 2675 2677 (face font-lock-keyword-face fontified t) 2677 2678 (fontified t) 2678 2681 (face font-lock-keyword-face fontified t) 2681 2696 (fontified t) 2696 2697 (face (rainbow-delimiters-depth-1-face) fontified t) 2697 2705 (fontified t) 2705 2706 (face (rainbow-delimiters-depth-1-face) fontified t) 2706 2708 (fontified t) 2708 2716 (fontified t) 2716 2720 (face font-lock-keyword-face fontified t) 2720 2721 (fontified t) 2721 2725 (face font-lock-builtin-face fontified t) 2725 2726 (face (rainbow-delimiters-depth-1-face) fontified t) 2726 2736 (fontified t) 2736 2739 (face font-lock-string-face fontified t) 2739 2749 (fontified t) 2749 2750 (face font-lock-operator-face fontified t) 2750 2757 (face font-lock-string-face fontified t) 2757 2758 (face (rainbow-delimiters-depth-1-face) fontified t) 2758 2759 (fontified t) 2759 2761 (face font-lock-keyword-face fontified t) 2761 2765 (fontified t) 2765 2786 (fontified t) 2786 2787 (face (rainbow-delimiters-depth-1-face) fontified t) 2787 2807 (fontified t) 2807 2808 (face font-lock-operator-face fontified t) 2808 2823 (fontified t) 2823 2824 (face font-lock-operator-face fontified t) 2824 2829 (face font-lock-constant-face fontified t) 2829 2830 (face (rainbow-delimiters-depth-1-face) fontified t) 2830 2831 (fontified t) 2831 2832 (fontified t) 2832 2836 (fontified t) 2836 2841 (face font-lock-builtin-face fontified t) 2841 2842 (face (rainbow-delimiters-depth-1-face) fontified t) 2842 2843 (fontified t) 2843 2846 (face font-lock-string-face fontified t) 2846 2854 (face nil fontified t) 2854 2856 (face font-lock-string-face fontified t) 2856 2866 (face nil fontified t) 2866 2869 (face font-lock-string-face fontified t) 2869 2875 (face nil fontified t) 2875 2876 (face font-lock-string-face fontified t) 2876 2877 (face (rainbow-delimiters-depth-1-face) fontified t) 2877 2878 (fontified t) 2878 2879 (fontified t) 2879 2880 (fontified t) 2880 2883 (face font-lock-keyword-face fontified t) 2883 2884 (fontified t) 2884 2900 (face font-lock-function-name-face fontified t) 2900 2901 (face (rainbow-delimiters-depth-1-face) fontified t) 2901 2908 (fontified t) 2908 2912 (face font-lock-builtin-face fontified t) 2912 2921 (fontified t) 2921 2924 (face font-lock-builtin-face fontified t) 2924 2925 (face (rainbow-delimiters-depth-1-face) fontified t) 2925 2926 (fontified t) 2926 2927 (face font-lock-operator-face fontified t) 2927 2928 (face font-lock-operator-face fontified t) 2928 2929 (fontified t) 2929 2932 (face font-lock-builtin-face fontified t) 2932 2934 (fontified t) 2934 2938 (fontified t) 2938 2941 (face font-lock-keyword-face fontified t) 2941 2944 (fontified t) 2944 2946 (face font-lock-keyword-face fontified t) 2946 2956 (fontified t) 2956 2957 (face (rainbow-delimiters-depth-1-face) fontified t) 2957 2967 (face font-lock-string-face fontified t) 2967 2969 (fontified t) 2969 2970 (face (rainbow-delimiters-depth-2-face) fontified t) 2970 2971 (face (rainbow-delimiters-depth-2-face) fontified t) 2971 2972 (face (rainbow-delimiters-depth-1-face) fontified t) 2972 2974 (fontified t) 2974 2982 (fontified t) 2982 2984 (face font-lock-keyword-face fontified t) 2984 2990 (fontified t) 2990 2991 (face (rainbow-delimiters-depth-1-face) fontified t) 2991 2998 (face font-lock-string-face fontified t) 2998 2999 (face (rainbow-delimiters-depth-1-face) fontified t) 2999 3000 (fontified t) 3000 3002 (face font-lock-operator-face fontified t) 3002 3010 (fontified t) 3010 3022 (fontified t) 3022 3028 (face font-lock-keyword-face fontified t) 3028 3034 (fontified t) 3034 3035 (face (rainbow-delimiters-depth-1-face) fontified t) 3035 3044 (face font-lock-string-face fontified t) 3044 3046 (fontified t) 3046 3047 (face (rainbow-delimiters-depth-2-face) fontified t) 3047 3048 (face (rainbow-delimiters-depth-2-face) fontified t) 3048 3049 (face (rainbow-delimiters-depth-1-face) fontified t) 3049 3053 (fontified t) 3053 3054 (face (rainbow-delimiters-depth-1-face) fontified t) 3054 3060 (face font-lock-string-face fontified t) 3060 3067 (fontified t) 3067 3068 (face (rainbow-delimiters-depth-1-face) fontified t) 3068 3073 (fontified t) 3073 3079 (face font-lock-keyword-face fontified t) 3079 3088 (fontified t) 3088 3096 (face font-lock-type-face fontified t) 3096 3097 (face (rainbow-delimiters-depth-1-face) fontified t) 3097 3107 (face font-lock-string-face fontified t) 3107 3123 (fontified t) 3123 3124 (face font-lock-operator-face fontified t) 3124 3141 (fontified t) 3141 3142 (face (rainbow-delimiters-depth-1-face) fontified t) 3142 3143 (fontified t) 3143 3152 (face font-lock-keyword-face fontified t) 3152 3153 (fontified t) 3153 3167 (face font-lock-function-name-face fontified t) 3167 3168 (face (rainbow-delimiters-depth-1-face) fontified t) 3168 3183 (fontified t) 3183 3186 (face font-lock-builtin-face fontified t) 3186 3187 (fontified t) 3187 3188 (face font-lock-operator-face fontified t) 3188 3194 (fontified t) 3194 3195 (face (rainbow-delimiters-depth-2-face) fontified t) 3195 3199 (face font-lock-constant-face fontified t) 3199 3206 (fontified t) 3206 3207 (face font-lock-operator-face fontified t) 3207 3217 (face font-lock-string-face fontified t) 3217 3218 (face (rainbow-delimiters-depth-2-face) fontified t) 3218 3235 (fontified t) 3235 3238 (face font-lock-builtin-face fontified t) 3238 3239 (fontified t) 3239 3240 (face font-lock-operator-face fontified t) 3240 3246 (fontified t) 3246 3247 (face (rainbow-delimiters-depth-2-face) fontified t) 3247 3251 (face font-lock-constant-face fontified t) 3251 3258 (fontified t) 3258 3259 (face font-lock-operator-face fontified t) 3259 3277 (face font-lock-string-face fontified t) 3277 3278 (face (rainbow-delimiters-depth-2-face) fontified t) 3278 3299 (fontified t) 3299 3302 (face font-lock-builtin-face fontified t) 3302 3303 (fontified t) 3303 3304 (face font-lock-operator-face fontified t) 3304 3310 (fontified t) 3310 3311 (face (rainbow-delimiters-depth-2-face) fontified t) 3311 3315 (face font-lock-constant-face fontified t) 3315 3322 (fontified t) 3322 3323 (face font-lock-operator-face fontified t) 3323 3338 (face font-lock-string-face fontified t) 3338 3339 (face (rainbow-delimiters-depth-2-face) fontified t) 3339 3341 (fontified t) 3341 3342 (face (rainbow-delimiters-depth-1-face) fontified t) 3342 3348 (fontified t) 3348 3350 (face font-lock-keyword-face fontified t) 3350 3360 (fontified t) 3360 3362 (face font-lock-operator-face fontified t) 3362 3363 (fontified t) 3363 3374 (face font-lock-string-face fontified t) 3374 3375 (fontified t) 3375 3378 (face font-lock-keyword-face fontified t) 3378 3389 (fontified t) 3389 3391 (face font-lock-operator-face fontified t) 3391 3414 (fontified t) 3414 3420 (face font-lock-keyword-face fontified t) 3420 3439 (fontified t) 3439 3444 (face font-lock-keyword-face fontified t) 3444 3458 (fontified t) 3458 3459 (face (rainbow-delimiters-depth-1-face) fontified t) 3459 3470 (fontified t) 3470 3471 (face font-lock-operator-face fontified t) 3471 3482 (fontified t) 3482 3483 (face font-lock-operator-face fontified t) 3483 3494 (face font-lock-string-face fontified t) 3494 3495 (face (rainbow-delimiters-depth-1-face) fontified t) 3495 3498 (fontified t) 3498 3507 (face font-lock-type-face fontified t) 3507 3508 (face (rainbow-delimiters-depth-1-face) fontified t) 3508 3518 (face font-lock-string-face fontified t) 3518 3519 (face (rainbow-delimiters-depth-1-face) fontified t) 3519 3520 (fontified t) 3520 3529 (face font-lock-keyword-face fontified t) 3529 3530 (fontified t) 3530 3545 (face font-lock-function-name-face fontified t) 3545 3546 (face (rainbow-delimiters-depth-1-face) fontified t) 3546 3597 (fontified t) 3597 3598 (face (rainbow-delimiters-depth-1-face) fontified t) 3598 3604 (fontified t) 3604 3608 (face font-lock-variable-name-face fontified t) 3608 3609 (fontified t) 3609 3610 (face font-lock-operator-face fontified t) 3610 3611 (fontified t) 3611 3616 (face font-lock-keyword-face fontified t) 3616 3629 (fontified t) 3629 3630 (face (rainbow-delimiters-depth-1-face) fontified t) 3630 3631 (face (rainbow-delimiters-depth-1-face) fontified t) 3631 3636 (fontified t) 3636 3639 (face font-lock-keyword-face fontified t) 3639 3646 (fontified t) 3646 3648 (face font-lock-keyword-face fontified t) 3648 3657 (fontified t) 3657 3658 (face (rainbow-delimiters-depth-1-face) fontified t) 3658 3665 (face font-lock-string-face fontified t) 3665 3667 (fontified t) 3667 3668 (face (rainbow-delimiters-depth-2-face) fontified t) 3668 3669 (face (rainbow-delimiters-depth-2-face) fontified t) 3669 3670 (face (rainbow-delimiters-depth-1-face) fontified t) 3670 3680 (fontified t) 3680 3683 (face font-lock-keyword-face fontified t) 3683 3688 (fontified t) 3688 3691 (fontified t) 3691 3693 (fontified t face font-lock-keyword-face) 3693 3703 (fontified t) 3703 3704 (fontified t face (rainbow-delimiters-depth-1-face)) 3704 3713 (fontified t face font-lock-string-face) 3713 3715 (fontified t) 3715 3716 (fontified t face (rainbow-delimiters-depth-2-face)) 3716 3717 (fontified t face (rainbow-delimiters-depth-2-face)) 3717 3718 (fontified t face (rainbow-delimiters-depth-1-face)) 3718 3720 (fontified t) 3720 3732 (fontified t) 3732 3737 (face font-lock-variable-name-face fontified t) 3737 3738 (fontified t) 3738 3739 (face font-lock-operator-face fontified t) 3739 3750 (fontified t) 3750 3751 (face (rainbow-delimiters-depth-1-face) fontified t) 3751 3758 (face font-lock-string-face fontified t) 3758 3760 (fontified t) 3760 3761 (face (rainbow-delimiters-depth-2-face) fontified t) 3761 3762 (face (rainbow-delimiters-depth-2-face) fontified t) 3762 3763 (face (rainbow-delimiters-depth-1-face) fontified t) 3763 3776 (fontified t) 3776 3779 (face font-lock-keyword-face fontified t) 3779 3784 (fontified t) 3784 3786 (face font-lock-keyword-face fontified t) 3786 3796 (fontified t) 3796 3797 (face (rainbow-delimiters-depth-1-face) fontified t) 3797 3807 (face font-lock-string-face fontified t) 3807 3809 (fontified t) 3809 3810 (face (rainbow-delimiters-depth-2-face) fontified t) 3810 3811 (face (rainbow-delimiters-depth-2-face) fontified t) 3811 3812 (face (rainbow-delimiters-depth-1-face) fontified t) 3812 3830 (fontified t) 3830 3835 (face font-lock-variable-name-face fontified t) 3835 3836 (fontified t) 3836 3837 (face font-lock-operator-face fontified t) 3837 3845 (fontified t) 3845 3846 (face (rainbow-delimiters-depth-1-face) fontified t) 3846 3852 (face font-lock-string-face fontified t) 3852 3854 (fontified t) 3854 3856 (face font-lock-string-face fontified t) 3856 3857 (face (rainbow-delimiters-depth-1-face) fontified t) 3857 3874 (fontified t) 3874 3878 (face font-lock-variable-name-face fontified t) 3878 3879 (fontified t) 3879 3880 (face font-lock-operator-face fontified t) 3880 3897 (fontified t) 3897 3898 (face (rainbow-delimiters-depth-1-face) fontified t) 3898 3910 (fontified t) 3910 3911 (face (rainbow-delimiters-depth-1-face) fontified t) 3911 3953 (fontified t) 3953 3954 (face (rainbow-delimiters-depth-1-face) fontified t) 3954 3976 (fontified t) 3976 3977 (face (rainbow-delimiters-depth-1-face) fontified t) 3977 3995 (fontified t) 3995 3997 (face font-lock-comment-delimiter-face fontified t) 3997 4030 (face font-lock-comment-face fontified t) 4030 4046 (fontified t) 4046 4048 (face font-lock-keyword-face fontified t) 4048 4065 (fontified t) 4065 4066 (face (rainbow-delimiters-depth-1-face) fontified t) 4066 4071 (fontified t) 4071 4072 (face (rainbow-delimiters-depth-1-face) fontified t) 4072 4074 (fontified t) 4074 4119 (fontified t) 4119 4120 (face (rainbow-delimiters-depth-1-face) fontified t) 4120 4155 (fontified t) 4155 4156 (face (rainbow-delimiters-depth-1-face) fontified t) 4156 4157 (fontified t) 4157 4173 (fontified t) 4173 4177 (face font-lock-keyword-face fontified t) 4177 4179 (fontified t) 4179 4199 (fontified t) 4199 4224 (fontified t) 4224 4225 (face (rainbow-delimiters-depth-1-face) fontified t) 4225 4260 (fontified t) 4260 4261 (face (rainbow-delimiters-depth-1-face) fontified t) 4261 4262 (fontified t rear-nonsticky t) 4262 4263 (fontified t) 4263 4268 (fontified t) 4268 4274 (face font-lock-keyword-face fontified t) 4274 4275 (fontified t) 4275 4276 (face (rainbow-delimiters-depth-1-face) fontified t) 4276 4284 (face font-lock-string-face fontified t) 4284 4286 (fontified t) 4286 4290 (face font-lock-string-face fontified t) 4290 4291 (face (rainbow-delimiters-depth-1-face) fontified t) 4291 4294 (fontified t) 4294 4296 (face font-lock-keyword-face fontified t) 4296 4297 (fontified t) 4297 4305 (face font-lock-builtin-face fontified t) 4305 4306 (fontified t) 4306 4308 (face font-lock-operator-face fontified t) 4308 4309 (fontified t) 4309 4319 (face font-lock-string-face fontified t) 4319 4321 (fontified t) 4321 4336 (fontified t) 4336 4337 (face (rainbow-delimiters-depth-1-face) fontified t) 4337 4347 (face font-lock-string-face fontified t) 4347 4353 (fontified t) 4353 4354 (face font-lock-operator-face fontified t) 4354 4363 (face font-lock-string-face fontified t) 4363 4369 (fontified t) 4369 4370 (face font-lock-operator-face fontified t) 4370 4376 (fontified t) 4376 4382 (face font-lock-builtin-face fontified t) 4382 4383 (face font-lock-operator-face fontified t) 4383 4387 (face font-lock-constant-face fontified t)) . 1) (undo-tree-id278 . -472) (undo-tree-id279 . -673) (undo-tree-id280 . -421) (undo-tree-id281 . -471) (undo-tree-id282 . -446) (undo-tree-id283 . 3939) (undo-tree-id284 . -447) (undo-tree-id285 . -446) (undo-tree-id286 . 188) (undo-tree-id287 . -651) (undo-tree-id288 . -308) (undo-tree-id289 . -307) (undo-tree-id290 . -307) (undo-tree-id291 . -651) (undo-tree-id292 . -651) (undo-tree-id293 . -651) (undo-tree-id294 . -2670) (undo-tree-id295 . -2670) (undo-tree-id296 . -4173) (undo-tree-id297 . -4177) (undo-tree-id298 . 125) (undo-tree-id299 . -4094) (undo-tree-id300 . -4195) (undo-tree-id301 . -4198) (undo-tree-id302 . -4198) (undo-tree-id303 . -651) (undo-tree-id304 . -3086) (undo-tree-id305 . -3086) (undo-tree-id306 . -3086) (undo-tree-id307 . -3) (undo-tree-id308 . -3) (undo-tree-id309 . -514) (undo-tree-id310 . -447) (undo-tree-id311 . -446) (undo-tree-id312 . -421) (undo-tree-id313 . -421) (t 27031 36017 922113 613000)) nil (27031 36424 704412 764000) 0 nil])
([nil nil ((1 . 4388) (#("PHONE_NUMBER_ID = os.getenv(\"PHONE_NUMBER_ID\", \"\"" 0 15 (face font-lock-variable-name-face fontified t) 15 16 (fontified t) 16 17 (face font-lock-operator-face fontified t) 17 27 (fontified t) 27 28 (face (rainbow-delimiters-depth-1-face) fontified t) 28 45 (face font-lock-string-face fontified t) 45 47 (fontified t) 47 49 (face font-lock-string-face fontified t)) . 1) (undo-tree-id197 . -4) (undo-tree-id198 . -4) (undo-tree-id199 . -4) (undo-tree-id200 . -4) (undo-tree-id201 . -4) (undo-tree-id202 . -4) (undo-tree-id203 . -4) (undo-tree-id204 . -4) (undo-tree-id205 . -4) (undo-tree-id206 . -4) (undo-tree-id207 . -4) (undo-tree-id208 . -4) (undo-tree-id209 . -4) (undo-tree-id210 . -4) (undo-tree-id211 . -4) (undo-tree-id212 . -4) (undo-tree-id213 . -4) (undo-tree-id214 . -4) (undo-tree-id215 . -4) (undo-tree-id216 . -4) (undo-tree-id217 . -4) (undo-tree-id218 . -4) (undo-tree-id219 . -4) (undo-tree-id220 . -4) (undo-tree-id221 . -4) (undo-tree-id222 . -4) (undo-tree-id223 . -4) (undo-tree-id224 . -4) (undo-tree-id225 . -4) (undo-tree-id226 . -4) (undo-tree-id227 . -4) (undo-tree-id228 . -4) (undo-tree-id229 . -4) (undo-tree-id230 . -4) (undo-tree-id231 . -4) (undo-tree-id232 . -4) (undo-tree-id233 . -4) (undo-tree-id234 . -4) (undo-tree-id235 . -4) (undo-tree-id236 . -4) (undo-tree-id237 . -4) (undo-tree-id238 . -4) (undo-tree-id239 . -4) (undo-tree-id240 . -4) (undo-tree-id241 . -4) (undo-tree-id242 . -4) (undo-tree-id243 . -4) (undo-tree-id244 . -4) (undo-tree-id245 . -4) (undo-tree-id246 . -4) (undo-tree-id247 . -4) (undo-tree-id248 . -4) (undo-tree-id249 . -4) (undo-tree-id250 . -4) (undo-tree-id251 . -4) (undo-tree-id252 . -4) (undo-tree-id253 . -4) (undo-tree-id254 . -4) (undo-tree-id255 . -4) (undo-tree-id256 . -4) (undo-tree-id257 . -4) (undo-tree-id258 . -4) (undo-tree-id259 . -4) (undo-tree-id260 . -4) (undo-tree-id261 . -4) (undo-tree-id262 . -4) (undo-tree-id263 . -4) (undo-tree-id264 . -4) (undo-tree-id265 . -4) (undo-tree-id266 . -4) (undo-tree-id267 . -4) (undo-tree-id268 . -4) (undo-tree-id269 . -4) (undo-tree-id270 . -4) (undo-tree-id271 . -4) (undo-tree-id272 . -4) (undo-tree-id273 . -4) (undo-tree-id274 . -4) (undo-tree-id275 . -4) (undo-tree-id276 . -4) (undo-tree-id277 . -4) (t 27031 36421 290721 926000)) nil (27031 36424 704396 204000) 0 nil])
([nil nil ((nil rear-nonsticky nil 4489 . 4490) (nil fontified nil 1 . 4490) (1 . 4490) (#("\"\"\"fibrobot â€” WhatsApp Business webhook that logs incoming messages.\"\"\"
import os
import json
import httpx
from datetime import datetime
from dotenv import load_dotenv
from fastapi import FastAPI, Request, Query, HTTPException, BackgroundTasks
from fastapi.responses import PlainTextResponse
import uvicorn

from messages import INTRO, PRICE

load_dotenv(\".secrets\")

WHATSAPP_API_KEY = os.getenv(\"WHATSAPP_API_KEY\", \"\")
PHONE_NUMBER_ID = os.getenv(\"PHONE_NUMBER_ID\", \"\")
VERIFY_TOKEN = os.getenv(\"VERIFY_TOKEN\", \"fibrobot_verify\")
LOGS_DIR = os.path.join(os.path.dirname(__file__), \"logs\")
SEEN_DIR = os.path.join(os.path.dirname(__file__), \"seen\")


app = FastAPI(title=\"fibrobot\")


@app.middleware(\"http\")
async def add_ngrok_header(request: Request, call_next):
    response = await call_next(request)
    response.headers[\"ngrok-skip-browser-warning\"] = \"true\"
    return response


def is_first_contact(phone: str) -> bool:
    \"\"\"Returns True if this phone number has never messaged before.\"\"\"
    os.makedirs(SEEN_DIR, exist_ok=True)
    filepath = os.path.join(SEEN_DIR, f\"{phone}.seen\")
    if os.path.exists(filepath):
        return False
    open(filepath, \"w\").close()
    return True


async def send_whatsapp_message(to: str, message: str):
    \"\"\"Send a WhatsApp message via the Meta API.\"\"\"
    url = f\"https://graph.facebook.com/v19.0/{PHONE_NUMBER_ID}/messages\"
    headers = {
        \"Authorization\": f\"Bearer {WHATSAPP_API_KEY}\",
        \"Content-Type\": \"application/json\",
    }
    payload = {
        \"messaging_product\": \"whatsapp\",
        \"to\": to,
        \"type\": \"text\",
        \"text\": {\"body\": message},
    }
    async with httpx.AsyncClient() as client:
        r = await client.post(url, headers=headers, json=payload)
        print(f\"ðŸ“¤ Sent to {to}: {r.status_code}\")
        return r.json()


def log_message(msg: dict, contact_name: str = \"\"):
    \"\"\"Write a message to a log file in logs/.\"\"\"
    os.makedirs(LOGS_DIR, exist_ok=True)
    sender = contact_name or msg.get(\"from\", \"unknown\")
    ts = msg.get(\"timestamp\", \"0\")
    msg_id = msg.get(\"id\", ts)

    try:
        time_str = datetime.fromtimestamp(int(ts)).strftime(\"%Y-%m-%d %H:%M:%S\")
    except Exception:
        time_str = ts

    mtype = msg.get(\"type\", \"unknown\")
    body = \"\"
    if mtype == \"text\":
        body = msg.get(\"text\", {}).get(\"body\", \"\")
    elif mtype == \"audio\":
        body = \"[voice note]\"

    log_entry = {
        \"id\": msg_id,
        \"from\": sender,
        \"time\": time_str,
        \"type\": mtype,
        \"body\": body,
        \"raw\": msg,
    }

    filename = f\"{msg_id}_{sender}.json\"
    filepath = os.path.join(LOGS_DIR, filename)

    if not os.path.exists(filepath):
        with open(filepath, \"w\", encoding=\"utf-8\") as f:
            json.dump(log_entry, f, indent=2, ensure_ascii=False)

    print(f\"ðŸ“¨ {sender} ({time_str}): {body}\")


def get_contact_name(value: dict, phone: str) -> str:
    for c in value.get(\"contacts\", []):
        if c.get(\"wa_id\") == phone:
            return c.get(\"profile\", {}).get(\"name\", phone)
    return phone


@app.get(\"/webhook\", response_class=PlainTextResponse)
async def verify_webhook(
    hub_mode: str = Query(None, alias=\"hub.mode\"),
    hub_token: str = Query(None, alias=\"hub.verify_token\"),
    hub_challenge: str = Query(None, alias=\"hub.challenge\"),
):
    if hub_mode == \"subscribe\" and hub_token == VERIFY_TOKEN:
        return hub_challenge
    raise HTTPException(status_code=403, detail=\"Forbidden\")


@app.post(\"/webhook\")
async def receive_message(request: Request, background_tasks: BackgroundTasks):
    data = await request.json()
    for entry in data.get(\"entry\", []):
        for change in entry.get(\"changes\", []):
            value = change.get(\"value\", {})
            for msg in value.get(\"messages\", []):
                phone = msg.get(\"from\", \"\")
                name = get_contact_name(value, phone)
                background_tasks.add_task(log_message, msg, name)

                # Send intro only on first contact
                if is_first_contact(phone):
                    background_tasks.add_task(send_whatsapp_message, phone, INTRO)
                else:
                    background_tasks.add_task(send_whatsapp_message, phone, INTRO)


    return {\"status\": \"ok\"}


if __name__ == \"__main__\":
    uvicorn.run(\"main:app\", host=\"0.0.0.0\", port=3000, reload=True)" 0 2 (face font-lock-doc-face fontified t) 2 3 (face font-lock-doc-face syntax-table (15) fontified t) 3 68 (face font-lock-doc-face fontified t) 68 69 (face font-lock-doc-face syntax-table (15) fontified t) 69 71 (face font-lock-doc-face fontified t) 71 72 (fontified t) 72 78 (face font-lock-keyword-face fontified t) 78 82 (fontified t) 82 88 (face font-lock-keyword-face fontified t) 88 94 (fontified t) 94 100 (face font-lock-keyword-face fontified t) 100 107 (fontified t) 107 111 (face font-lock-keyword-face fontified t) 111 121 (fontified t) 121 127 (face font-lock-keyword-face fontified t) 127 137 (fontified t) 137 141 (face font-lock-keyword-face fontified t) 141 149 (fontified t) 149 155 (face font-lock-keyword-face fontified t) 155 168 (fontified t) 168 172 (face font-lock-keyword-face fontified t) 172 181 (fontified t) 181 187 (face font-lock-keyword-face fontified t) 187 244 (fontified t) 244 248 (face font-lock-keyword-face fontified t) 248 267 (fontified t) 267 273 (face font-lock-keyword-face fontified t) 273 292 (fontified t) 292 298 (face font-lock-keyword-face fontified t) 298 306 (fontified t) 306 307 (fontified t) 307 308 (fontified t) 308 312 (face font-lock-keyword-face fontified t) 312 322 (fontified t) 322 328 (face font-lock-keyword-face fontified t) 328 340 (fontified t) 340 341 (fontified t rear-nonsticky t) 341 342 (fontified t) 342 354 (fontified t) 354 355 (face (rainbow-delimiters-depth-1-face) fontified t) 355 365 (face font-lock-string-face fontified t) 365 366 (face (rainbow-delimiters-depth-1-face) fontified t) 366 368 (fontified t) 368 384 (face font-lock-variable-name-face fontified t) 384 385 (fontified t) 385 386 (face font-lock-operator-face fontified t) 386 396 (fontified t) 396 397 (face (rainbow-delimiters-depth-1-face) fontified t) 397 415 (face font-lock-string-face fontified t) 415 417 (fontified t) 417 419 (face font-lock-string-face fontified t) 419 420 (face (rainbow-delimiters-depth-1-face) fontified t) 420 421 (fontified t) 421 436 (face font-lock-variable-name-face fontified t) 436 437 (fontified t) 437 438 (face font-lock-operator-face fontified t) 438 448 (fontified t) 448 449 (face (rainbow-delimiters-depth-1-face) fontified t) 449 466 (face font-lock-string-face fontified t) 466 468 (fontified t) 468 470 (face font-lock-string-face fontified t) 470 471 (face (rainbow-delimiters-depth-1-face) fontified t) 471 472 (fontified t) 472 484 (face font-lock-variable-name-face fontified t) 484 485 (fontified t) 485 486 (face font-lock-operator-face fontified t) 486 496 (fontified t) 496 497 (face (rainbow-delimiters-depth-1-face) fontified t) 497 511 (face font-lock-string-face fontified t) 511 513 (fontified t) 513 530 (face font-lock-string-face fontified t) 530 531 (face (rainbow-delimiters-depth-1-face) fontified t) 531 532 (fontified t) 532 540 (face font-lock-variable-name-face fontified t) 540 541 (fontified t) 541 542 (face font-lock-operator-face fontified t) 542 555 (fontified t) 555 556 (face (rainbow-delimiters-depth-1-face) fontified t) 556 571 (fontified t) 571 572 (face (rainbow-delimiters-depth-2-face) fontified t) 572 580 (fontified t) 580 581 (face (rainbow-delimiters-depth-2-face) fontified t) 581 583 (fontified t) 583 589 (face font-lock-string-face fontified t) 589 590 (face (rainbow-delimiters-depth-1-face) fontified t) 590 591 (fontified t) 591 599 (face font-lock-variable-name-face fontified t) 599 600 (fontified t) 600 601 (face font-lock-operator-face fontified t) 601 614 (fontified t) 614 615 (face (rainbow-delimiters-depth-1-face) fontified t) 615 630 (fontified t) 630 631 (face (rainbow-delimiters-depth-2-face) fontified t) 631 639 (fontified t) 639 640 (face (rainbow-delimiters-depth-2-face) fontified t) 640 642 (fontified t) 642 648 (face font-lock-string-face fontified t) 648 649 (face (rainbow-delimiters-depth-1-face) fontified t) 649 651 (fontified t) 651 652 (fontified t) 652 655 (face font-lock-variable-name-face fontified t) 655 656 (fontified t) 656 657 (face font-lock-operator-face fontified t) 657 665 (fontified t) 665 666 (face (rainbow-delimiters-depth-1-face) fontified t) 666 671 (fontified t) 671 672 (face font-lock-operator-face fontified t) 672 682 (face font-lock-string-face fontified t) 682 683 (face (rainbow-delimiters-depth-1-face) fontified t) 683 684 (fontified t) 684 686 (fontified t) 686 701 (face font-lock-type-face fontified t) 701 702 (face (rainbow-delimiters-depth-1-face) fontified t) 702 708 (face font-lock-string-face fontified t) 708 709 (face (rainbow-delimiters-depth-1-face) fontified t) 709 710 (fontified t) 710 719 (face font-lock-keyword-face fontified t) 719 720 (fontified t) 720 736 (face font-lock-function-name-face fontified t) 736 737 (face (rainbow-delimiters-depth-1-face) fontified t) 737 764 (fontified t) 764 765 (face (rainbow-delimiters-depth-1-face) fontified t) 765 771 (fontified t) 771 779 (face font-lock-variable-name-face fontified t) 779 780 (fontified t) 780 781 (face font-lock-operator-face fontified t) 781 782 (fontified t) 782 787 (face font-lock-keyword-face fontified t) 787 797 (fontified t) 797 798 (face (rainbow-delimiters-depth-1-face) fontified t) 798 805 (fontified t) 805 806 (face (rainbow-delimiters-depth-1-face) fontified t) 806 820 (fontified t) 820 827 (face font-lock-variable-name-face fontified t) 827 828 (face (rainbow-delimiters-depth-1-face) fontified t) 828 856 (face font-lock-string-face fontified t) 856 857 (face (rainbow-delimiters-depth-1-face) fontified t) 857 858 (fontified t) 858 859 (face font-lock-operator-face fontified t) 859 860 (fontified t) 860 866 (face font-lock-string-face fontified t) 866 871 (fontified t) 871 877 (face font-lock-keyword-face fontified t) 877 889 (fontified t) 889 892 (face font-lock-keyword-face fontified t) 892 893 (fontified t) 893 909 (face font-lock-function-name-face fontified t) 909 910 (face (rainbow-delimiters-depth-1-face) fontified t) 910 917 (fontified t) 917 920 (face font-lock-builtin-face fontified t) 920 921 (face (rainbow-delimiters-depth-1-face) fontified t) 921 922 (fontified t) 922 923 (face font-lock-operator-face fontified t) 923 924 (face font-lock-operator-face fontified t) 924 925 (fontified t) 925 929 (face font-lock-builtin-face fontified t) 929 935 (fontified t) 935 936 (face font-lock-doc-face fontified t) 936 937 (face font-lock-doc-face fontified t) 937 938 (face font-lock-doc-face syntax-table (15) fontified t) 938 946 (face font-lock-doc-face fontified t) 946 950 (face font-lock-doc-face fontified t) 950 951 (face font-lock-doc-face fontified t) 951 953 (face font-lock-doc-face fontified t) 953 998 (face font-lock-doc-face fontified t) 998 999 (face font-lock-doc-face syntax-table (15) fontified t) 999 1000 (face font-lock-doc-face fontified t) 1000 1001 (face font-lock-doc-face fontified t) 1001 1017 (fontified t) 1017 1018 (face (rainbow-delimiters-depth-1-face) fontified t) 1018 1036 (fontified t) 1036 1037 (face font-lock-operator-face fontified t) 1037 1041 (face font-lock-constant-face fontified t) 1041 1042 (face (rainbow-delimiters-depth-1-face) fontified t) 1042 1047 (fontified t) 1047 1055 (face font-lock-variable-name-face fontified t) 1055 1056 (fontified t) 1056 1057 (face font-lock-operator-face fontified t) 1057 1070 (fontified t) 1070 1071 (face (rainbow-delimiters-depth-1-face) fontified t) 1071 1082 (fontified t) 1082 1083 (face font-lock-string-face fontified t) 1083 1090 (face nil fontified t) 1090 1096 (face font-lock-string-face fontified t) 1096 1097 (face (rainbow-delimiters-depth-1-face) fontified t) 1097 1102 (fontified t) 1102 1104 (face font-lock-keyword-face fontified t) 1104 1119 (fontified t) 1119 1120 (face (rainbow-delimiters-depth-1-face) fontified t) 1120 1128 (fontified t) 1128 1129 (face (rainbow-delimiters-depth-1-face) fontified t) 1129 1139 (fontified t) 1139 1145 (face font-lock-keyword-face fontified t) 1145 1146 (fontified t) 1146 1151 (face font-lock-constant-face fontified t) 1151 1156 (fontified t) 1156 1160 (face font-lock-builtin-face fontified t) 1160 1161 (face (rainbow-delimiters-depth-1-face) fontified t) 1161 1171 (fontified t) 1171 1174 (face font-lock-string-face fontified t) 1174 1175 (face (rainbow-delimiters-depth-1-face) fontified t) 1175 1181 (fontified t) 1181 1182 (face (rainbow-delimiters-depth-1-face) fontified t) 1182 1183 (face (rainbow-delimiters-depth-1-face) fontified t) 1183 1188 (fontified t) 1188 1194 (face font-lock-keyword-face fontified t) 1194 1195 (fontified t) 1195 1199 (face font-lock-constant-face fontified t) 1199 1202 (fontified t) 1202 1211 (face font-lock-keyword-face fontified t) 1211 1212 (fontified t) 1212 1233 (face font-lock-function-name-face fontified t) 1233 1234 (face (rainbow-delimiters-depth-1-face) fontified t) 1234 1238 (fontified t) 1238 1241 (face font-lock-builtin-face fontified t) 1241 1252 (fontified t) 1252 1255 (face font-lock-builtin-face fontified t) 1255 1256 (face (rainbow-delimiters-depth-1-face) fontified t) 1256 1262 (fontified t) 1262 1263 (face font-lock-doc-face fontified t) 1263 1264 (face font-lock-doc-face fontified t) 1264 1265 (face font-lock-doc-face syntax-table (15) fontified t) 1265 1306 (face font-lock-doc-face fontified t) 1306 1307 (face font-lock-doc-face syntax-table (15) fontified t) 1307 1308 (face font-lock-doc-face fontified t) 1308 1309 (face font-lock-doc-face fontified t) 1309 1314 (fontified t) 1314 1317 (face font-lock-variable-name-face fontified t) 1317 1318 (fontified t) 1318 1319 (face font-lock-operator-face fontified t) 1319 1321 (fontified t) 1321 1333 (face font-lock-string-face fontified t) 1333 1355 (face font-lock-string-face fontified t) 1355 1372 (face nil fontified t) 1372 1382 (face font-lock-string-face fontified t) 1382 1383 (fontified t) 1383 1387 (fontified t) 1387 1394 (face font-lock-variable-name-face fontified t) 1394 1395 (fontified t) 1395 1396 (face font-lock-operator-face fontified t) 1396 1397 (fontified t) 1397 1398 (face (rainbow-delimiters-depth-1-face) fontified t) 1398 1407 (fontified t) 1407 1422 (face font-lock-string-face fontified t) 1422 1425 (fontified t) 1425 1433 (face font-lock-string-face fontified t) 1433 1451 (face nil fontified t) 1451 1452 (face font-lock-string-face fontified t) 1452 1462 (fontified t) 1462 1476 (face font-lock-string-face fontified t) 1476 1478 (fontified t) 1478 1496 (face font-lock-string-face fontified t) 1496 1500 (fontified t) 1500 1502 (fontified t) 1502 1503 (face (rainbow-delimiters-depth-1-face) fontified t) 1503 1504 (fontified t) 1504 1508 (fontified t) 1508 1515 (face font-lock-variable-name-face fontified t) 1515 1516 (fontified t) 1516 1517 (face font-lock-operator-face fontified t) 1517 1518 (fontified t) 1518 1519 (face (rainbow-delimiters-depth-1-face) fontified t) 1519 1520 (fontified t) 1520 1528 (fontified t) 1528 1547 (face font-lock-string-face fontified t) 1547 1549 (fontified t) 1549 1559 (face font-lock-string-face fontified t) 1559 1569 (fontified t) 1569 1573 (face font-lock-string-face fontified t) 1573 1587 (fontified t) 1587 1593 (face font-lock-string-face fontified t) 1593 1595 (fontified t) 1595 1601 (face font-lock-string-face fontified t) 1601 1606 (fontified t) 1606 1611 (fontified t) 1611 1617 (face font-lock-string-face fontified t) 1617 1619 (fontified t) 1619 1620 (face (rainbow-delimiters-depth-2-face) fontified t) 1620 1626 (face font-lock-string-face fontified t) 1626 1635 (fontified t) 1635 1636 (face (rainbow-delimiters-depth-2-face) fontified t) 1636 1638 (fontified t) 1638 1642 (fontified t) 1642 1643 (face (rainbow-delimiters-depth-1-face) fontified t) 1643 1648 (fontified t) 1648 1658 (face font-lock-keyword-face fontified t) 1658 1676 (fontified t) 1676 1677 (face (rainbow-delimiters-depth-1-face) fontified t) 1677 1678 (face (rainbow-delimiters-depth-1-face) fontified t) 1678 1679 (fontified t) 1679 1681 (face font-lock-keyword-face fontified t) 1681 1698 (fontified t) 1698 1699 (face font-lock-variable-name-face fontified t) 1699 1700 (fontified t) 1700 1701 (face font-lock-operator-face fontified t) 1701 1702 (fontified t) 1702 1707 (face font-lock-keyword-face fontified t) 1707 1719 (fontified t) 1719 1720 (face (rainbow-delimiters-depth-1-face) fontified t) 1720 1732 (fontified t) 1732 1733 (face font-lock-operator-face fontified t) 1733 1746 (fontified t) 1746 1747 (face font-lock-operator-face fontified t) 1747 1754 (fontified t) 1754 1755 (face (rainbow-delimiters-depth-1-face) fontified t) 1755 1764 (fontified t) 1764 1769 (face font-lock-builtin-face fontified t) 1769 1770 (face (rainbow-delimiters-depth-1-face) fontified t) 1770 1771 (fontified t) 1771 1782 (face font-lock-string-face fontified t) 1782 1786 (face nil fontified t) 1786 1788 (face font-lock-string-face fontified t) 1788 1803 (face nil fontified t) 1803 1804 (face font-lock-string-face fontified t) 1804 1805 (face (rainbow-delimiters-depth-1-face) fontified t) 1805 1814 (fontified t) 1814 1820 (face font-lock-keyword-face fontified t) 1820 1827 (fontified t) 1827 1828 (face (rainbow-delimiters-depth-1-face) fontified t) 1828 1829 (face (rainbow-delimiters-depth-1-face) fontified t) 1829 1830 (fontified t) 1830 1831 (fontified t) 1831 1832 (fontified t) 1832 1835 (face font-lock-keyword-face fontified t) 1835 1836 (fontified t) 1836 1847 (face font-lock-function-name-face fontified t) 1847 1848 (face (rainbow-delimiters-depth-1-face) fontified t) 1848 1853 (fontified t) 1853 1857 (face font-lock-builtin-face fontified t) 1857 1873 (fontified t) 1873 1876 (face font-lock-builtin-face fontified t) 1876 1877 (fontified t) 1877 1878 (face font-lock-operator-face fontified t) 1878 1879 (fontified t) 1879 1881 (face font-lock-string-face fontified t) 1881 1882 (face (rainbow-delimiters-depth-1-face) fontified t) 1882 1888 (fontified t) 1888 1889 (face font-lock-doc-face fontified t) 1889 1890 (face font-lock-doc-face fontified t) 1890 1891 (face font-lock-doc-face fontified t syntax-table (15)) 1891 1916 (face font-lock-doc-face fontified t) 1916 1920 (face font-lock-doc-face fontified t) 1920 1921 (face font-lock-doc-face fontified t) 1921 1923 (face font-lock-doc-face fontified t) 1923 1928 (face font-lock-doc-face fontified t) 1928 1929 (face font-lock-doc-face fontified t) 1929 1930 (face font-lock-doc-face fontified t) 1930 1931 (face font-lock-doc-face fontified t syntax-table (15)) 1931 1932 (face font-lock-doc-face fontified t) 1932 1933 (face font-lock-doc-face fontified t) 1933 1949 (fontified t) 1949 1950 (face (rainbow-delimiters-depth-1-face) fontified t) 1950 1968 (fontified t) 1968 1969 (face font-lock-operator-face fontified t) 1969 1970 (face font-lock-constant-face fontified t) 1970 1973 (face font-lock-constant-face fontified t) 1973 1974 (face (rainbow-delimiters-depth-1-face) fontified t) 1974 1975 (fontified t) 1975 1979 (fontified t) 1979 1985 (face font-lock-variable-name-face fontified t) 1985 1986 (fontified t) 1986 1987 (face font-lock-operator-face fontified t) 1987 2001 (fontified t) 2001 2003 (face font-lock-keyword-face fontified t) 2003 2011 (fontified t) 2011 2012 (face (rainbow-delimiters-depth-1-face) fontified t) 2012 2018 (face font-lock-string-face fontified t) 2018 2020 (fontified t) 2020 2029 (face font-lock-string-face fontified t) 2029 2030 (face (rainbow-delimiters-depth-1-face) fontified t) 2030 2035 (fontified t) 2035 2036 (face font-lock-variable-name-face fontified t) 2036 2037 (face font-lock-variable-name-face fontified t) 2037 2038 (fontified t) 2038 2039 (face font-lock-operator-face fontified t) 2039 2047 (fontified t) 2047 2048 (face (rainbow-delimiters-depth-1-face) fontified t) 2048 2059 (face font-lock-string-face fontified t) 2059 2061 (fontified t) 2061 2064 (face font-lock-string-face fontified t) 2064 2065 (face (rainbow-delimiters-depth-1-face) fontified t) 2065 2066 (fontified t) 2066 2070 (fontified t) 2070 2076 (face font-lock-variable-name-face fontified t) 2076 2077 (fontified t) 2077 2078 (face font-lock-operator-face fontified t) 2078 2086 (fontified t) 2086 2087 (face (rainbow-delimiters-depth-1-face) fontified t) 2087 2091 (face font-lock-string-face fontified t) 2091 2095 (fontified t) 2095 2096 (face (rainbow-delimiters-depth-1-face) fontified t) 2096 2098 (fontified t) 2098 2102 (fontified t) 2102 2105 (face font-lock-keyword-face fontified t) 2105 2107 (fontified t) 2107 2115 (fontified t) 2115 2123 (face font-lock-variable-name-face fontified t) 2123 2124 (fontified t) 2124 2125 (face font-lock-operator-face fontified t) 2125 2148 (fontified t) 2148 2149 (face (rainbow-delimiters-depth-1-face) fontified t) 2149 2151 (face font-lock-builtin-face fontified t) 2151 2152 (face font-lock-builtin-face fontified t) 2152 2153 (face (rainbow-delimiters-depth-2-face) fontified t) 2153 2155 (fontified t) 2155 2156 (face (rainbow-delimiters-depth-2-face) fontified t) 2156 2157 (face (rainbow-delimiters-depth-1-face) fontified t) 2157 2166 (fontified t) 2166 2167 (face (rainbow-delimiters-depth-1-face) fontified t) 2167 2184 (face font-lock-string-face fontified t) 2184 2186 (face font-lock-string-face fontified t) 2186 2187 (face (rainbow-delimiters-depth-1-face) fontified t) 2187 2188 (fontified t) 2188 2192 (fontified t) 2192 2198 (face font-lock-keyword-face fontified t) 2198 2199 (fontified t) 2199 2208 (face font-lock-type-face fontified t) 2208 2218 (fontified t) 2218 2226 (face font-lock-variable-name-face fontified t) 2226 2227 (fontified t) 2227 2228 (face font-lock-operator-face fontified t) 2228 2237 (fontified t) 2237 2242 (face font-lock-variable-name-face fontified t) 2242 2243 (fontified t) 2243 2244 (face font-lock-operator-face fontified t) 2244 2252 (fontified t) 2252 2253 (face (rainbow-delimiters-depth-1-face) fontified t) 2253 2259 (face font-lock-string-face fontified t) 2259 2261 (fontified t) 2261 2270 (face font-lock-string-face fontified t) 2270 2271 (face (rainbow-delimiters-depth-1-face) fontified t) 2271 2276 (fontified t) 2276 2280 (face font-lock-variable-name-face fontified t) 2280 2281 (fontified t) 2281 2282 (face font-lock-operator-face fontified t) 2282 2283 (fontified t) 2283 2285 (face font-lock-string-face fontified t) 2285 2290 (fontified t) 2290 2292 (face font-lock-keyword-face fontified t) 2292 2299 (fontified t) 2299 2301 (face font-lock-operator-face fontified t) 2301 2302 (fontified t) 2302 2308 (face font-lock-string-face fontified t) 2308 2310 (fontified t) 2310 2318 (fontified t) 2318 2322 (face font-lock-variable-name-face fontified t) 2322 2323 (fontified t) 2323 2324 (face font-lock-operator-face fontified t) 2324 2332 (fontified t) 2332 2333 (face (rainbow-delimiters-depth-1-face) fontified t) 2333 2339 (face font-lock-string-face fontified t) 2339 2341 (fontified t) 2341 2342 (face (rainbow-delimiters-depth-2-face) fontified t) 2342 2343 (face (rainbow-delimiters-depth-2-face) fontified t) 2343 2344 (face (rainbow-delimiters-depth-1-face) fontified t) 2344 2348 (fontified t) 2348 2349 (face (rainbow-delimiters-depth-1-face) fontified t) 2349 2355 (face font-lock-string-face fontified t) 2355 2357 (fontified t) 2357 2359 (face font-lock-string-face fontified t) 2359 2360 (face (rainbow-delimiters-depth-1-face) fontified t) 2360 2361 (fontified t) 2361 2365 (fontified t) 2365 2369 (face font-lock-keyword-face fontified t) 2369 2376 (fontified t) 2376 2378 (face font-lock-operator-face fontified t) 2378 2379 (fontified t) 2379 2386 (face font-lock-string-face fontified t) 2386 2396 (fontified t) 2396 2400 (face font-lock-variable-name-face fontified t) 2400 2401 (fontified t) 2401 2402 (face font-lock-operator-face fontified t) 2402 2403 (fontified t) 2403 2417 (face font-lock-string-face fontified t) 2417 2423 (fontified t) 2423 2432 (face font-lock-variable-name-face fontified t) 2432 2433 (fontified t) 2433 2434 (face font-lock-operator-face fontified t) 2434 2435 (fontified t) 2435 2436 (face (rainbow-delimiters-depth-1-face) fontified t) 2436 2445 (fontified t) 2445 2449 (face font-lock-string-face fontified t) 2449 2467 (fontified t) 2467 2473 (face font-lock-string-face fontified t) 2473 2483 (fontified t) 2483 2491 (fontified t) 2491 2497 (face font-lock-string-face fontified t) 2497 2509 (fontified t) 2509 2517 (fontified t) 2517 2523 (face font-lock-string-face fontified t) 2523 2540 (fontified t) 2540 2546 (face font-lock-string-face fontified t) 2546 2562 (fontified t) 2562 2567 (face font-lock-string-face fontified t) 2567 2578 (fontified t) 2578 2579 (face (rainbow-delimiters-depth-1-face) fontified t) 2579 2580 (fontified t) 2580 2581 (fontified t) 2581 2585 (fontified t) 2585 2593 (face font-lock-variable-name-face fontified t) 2593 2594 (fontified t) 2594 2595 (face font-lock-operator-face fontified t) 2595 2597 (fontified t) 2597 2598 (face font-lock-string-face fontified t) 2598 2606 (face nil fontified t) 2606 2607 (face font-lock-string-face fontified t) 2607 2615 (face nil fontified t) 2615 2621 (face font-lock-string-face fontified t) 2621 2622 (fontified t) 2622 2626 (fontified t) 2626 2634 (face font-lock-variable-name-face fontified t) 2634 2635 (fontified t) 2635 2636 (face font-lock-operator-face fontified t) 2636 2649 (fontified t) 2649 2650 (face (rainbow-delimiters-depth-1-face) fontified t) 2650 2668 (fontified t) 2668 2669 (face (rainbow-delimiters-depth-1-face) fontified t) 2669 2670 (fontified t) 2670 2671 (fontified t) 2671 2675 (fontified t) 2675 2677 (face font-lock-keyword-face fontified t) 2677 2678 (fontified t) 2678 2681 (face font-lock-keyword-face fontified t) 2681 2696 (fontified t) 2696 2697 (face (rainbow-delimiters-depth-1-face) fontified t) 2697 2705 (fontified t) 2705 2706 (face (rainbow-delimiters-depth-1-face) fontified t) 2706 2708 (fontified t) 2708 2716 (fontified t) 2716 2720 (face font-lock-keyword-face fontified t) 2720 2721 (fontified t) 2721 2725 (face font-lock-builtin-face fontified t) 2725 2726 (face (rainbow-delimiters-depth-1-face) fontified t) 2726 2736 (fontified t) 2736 2739 (face font-lock-string-face fontified t) 2739 2749 (fontified t) 2749 2750 (face font-lock-operator-face fontified t) 2750 2757 (face font-lock-string-face fontified t) 2757 2758 (face (rainbow-delimiters-depth-1-face) fontified t) 2758 2759 (fontified t) 2759 2761 (face font-lock-keyword-face fontified t) 2761 2765 (fontified t) 2765 2786 (fontified t) 2786 2787 (face (rainbow-delimiters-depth-1-face) fontified t) 2787 2807 (fontified t) 2807 2808 (face font-lock-operator-face fontified t) 2808 2823 (fontified t) 2823 2824 (face font-lock-operator-face fontified t) 2824 2829 (face font-lock-constant-face fontified t) 2829 2830 (face (rainbow-delimiters-depth-1-face) fontified t) 2830 2831 (fontified t) 2831 2832 (fontified t) 2832 2836 (fontified t) 2836 2841 (face font-lock-builtin-face fontified t) 2841 2842 (face (rainbow-delimiters-depth-1-face) fontified t) 2842 2843 (fontified t) 2843 2846 (face font-lock-string-face fontified t) 2846 2854 (face nil fontified t) 2854 2856 (face font-lock-string-face fontified t) 2856 2866 (face nil fontified t) 2866 2869 (face font-lock-string-face fontified t) 2869 2875 (face nil fontified t) 2875 2876 (face font-lock-string-face fontified t) 2876 2877 (face (rainbow-delimiters-depth-1-face) fontified t) 2877 2878 (fontified t) 2878 2879 (fontified t) 2879 2880 (fontified t) 2880 2883 (face font-lock-keyword-face fontified t) 2883 2884 (fontified t) 2884 2900 (face font-lock-function-name-face fontified t) 2900 2901 (face (rainbow-delimiters-depth-1-face) fontified t) 2901 2908 (fontified t) 2908 2912 (face font-lock-builtin-face fontified t) 2912 2921 (fontified t) 2921 2924 (face font-lock-builtin-face fontified t) 2924 2925 (face (rainbow-delimiters-depth-1-face) fontified t) 2925 2926 (fontified t) 2926 2927 (face font-lock-operator-face fontified t) 2927 2928 (face font-lock-operator-face fontified t) 2928 2929 (fontified t) 2929 2932 (face font-lock-builtin-face fontified t) 2932 2934 (fontified t) 2934 2938 (fontified t) 2938 2941 (face font-lock-keyword-face fontified t) 2941 2944 (fontified t) 2944 2946 (face font-lock-keyword-face fontified t) 2946 2956 (fontified t) 2956 2957 (face (rainbow-delimiters-depth-1-face) fontified t) 2957 2967 (face font-lock-string-face fontified t) 2967 2969 (fontified t) 2969 2970 (face (rainbow-delimiters-depth-2-face) fontified t) 2970 2971 (face (rainbow-delimiters-depth-2-face) fontified t) 2971 2972 (face (rainbow-delimiters-depth-1-face) fontified t) 2972 2974 (fontified t) 2974 2982 (fontified t) 2982 2984 (face font-lock-keyword-face fontified t) 2984 2990 (fontified t) 2990 2991 (face (rainbow-delimiters-depth-1-face) fontified t) 2991 2998 (face font-lock-string-face fontified t) 2998 2999 (face (rainbow-delimiters-depth-1-face) fontified t) 2999 3000 (fontified t) 3000 3002 (face font-lock-operator-face fontified t) 3002 3010 (fontified t) 3010 3022 (fontified t) 3022 3028 (face font-lock-keyword-face fontified t) 3028 3034 (fontified t) 3034 3035 (face (rainbow-delimiters-depth-1-face) fontified t) 3035 3044 (face font-lock-string-face fontified t) 3044 3046 (fontified t) 3046 3047 (face (rainbow-delimiters-depth-2-face) fontified t) 3047 3048 (face (rainbow-delimiters-depth-2-face) fontified t) 3048 3049 (face (rainbow-delimiters-depth-1-face) fontified t) 3049 3053 (fontified t) 3053 3054 (face (rainbow-delimiters-depth-1-face) fontified t) 3054 3060 (face font-lock-string-face fontified t) 3060 3067 (fontified t) 3067 3068 (face (rainbow-delimiters-depth-1-face) fontified t) 3068 3069 (fontified t) 3069 3073 (fontified t) 3073 3079 (face font-lock-keyword-face fontified t) 3079 3086 (fontified t) 3086 3087 (fontified t) 3087 3088 (fontified t) 3088 3096 (face font-lock-type-face fontified t) 3096 3097 (face (rainbow-delimiters-depth-1-face) fontified t) 3097 3107 (face font-lock-string-face fontified t) 3107 3123 (fontified t) 3123 3124 (face font-lock-operator-face fontified t) 3124 3141 (fontified t) 3141 3142 (face (rainbow-delimiters-depth-1-face) fontified t) 3142 3143 (fontified t) 3143 3152 (face font-lock-keyword-face fontified t) 3152 3153 (fontified t) 3153 3167 (face font-lock-function-name-face fontified t) 3167 3168 (face (rainbow-delimiters-depth-1-face) fontified t) 3168 3183 (fontified t) 3183 3186 (face font-lock-builtin-face fontified t) 3186 3187 (fontified t) 3187 3188 (face font-lock-operator-face fontified t) 3188 3194 (fontified t) 3194 3195 (face (rainbow-delimiters-depth-2-face) fontified t) 3195 3199 (face font-lock-constant-face fontified t) 3199 3206 (fontified t) 3206 3207 (face font-lock-operator-face fontified t) 3207 3217 (face font-lock-string-face fontified t) 3217 3218 (face (rainbow-delimiters-depth-2-face) fontified t) 3218 3235 (fontified t) 3235 3238 (face font-lock-builtin-face fontified t) 3238 3239 (fontified t) 3239 3240 (face font-lock-operator-face fontified t) 3240 3246 (fontified t) 3246 3247 (face (rainbow-delimiters-depth-2-face) fontified t) 3247 3251 (face font-lock-constant-face fontified t) 3251 3258 (fontified t) 3258 3259 (face font-lock-operator-face fontified t) 3259 3277 (face font-lock-string-face fontified t) 3277 3278 (face (rainbow-delimiters-depth-2-face) fontified t) 3278 3299 (fontified t) 3299 3302 (face font-lock-builtin-face fontified t) 3302 3303 (fontified t) 3303 3304 (face font-lock-operator-face fontified t) 3304 3310 (fontified t) 3310 3311 (face (rainbow-delimiters-depth-2-face) fontified t) 3311 3315 (face font-lock-constant-face fontified t) 3315 3322 (fontified t) 3322 3323 (face font-lock-operator-face fontified t) 3323 3338 (face font-lock-string-face fontified t) 3338 3339 (face (rainbow-delimiters-depth-2-face) fontified t) 3339 3341 (fontified t) 3341 3342 (face (rainbow-delimiters-depth-1-face) fontified t) 3342 3348 (fontified t) 3348 3350 (face font-lock-keyword-face fontified t) 3350 3360 (fontified t) 3360 3362 (face font-lock-operator-face fontified t) 3362 3363 (fontified t) 3363 3374 (face font-lock-string-face fontified t) 3374 3375 (fontified t) 3375 3378 (face font-lock-keyword-face fontified t) 3378 3389 (fontified t) 3389 3391 (face font-lock-operator-face fontified t) 3391 3414 (fontified t) 3414 3420 (face font-lock-keyword-face fontified t) 3420 3439 (fontified t) 3439 3444 (face font-lock-keyword-face fontified t) 3444 3458 (fontified t) 3458 3459 (face (rainbow-delimiters-depth-1-face) fontified t) 3459 3470 (fontified t) 3470 3471 (face font-lock-operator-face fontified t) 3471 3482 (fontified t) 3482 3483 (face font-lock-operator-face fontified t) 3483 3494 (face font-lock-string-face fontified t) 3494 3495 (face (rainbow-delimiters-depth-1-face) fontified t) 3495 3498 (fontified t) 3498 3507 (face font-lock-type-face fontified t) 3507 3508 (face (rainbow-delimiters-depth-1-face) fontified t) 3508 3518 (face font-lock-string-face fontified t) 3518 3519 (face (rainbow-delimiters-depth-1-face) fontified t) 3519 3520 (fontified t) 3520 3529 (face font-lock-keyword-face fontified t) 3529 3530 (fontified t) 3530 3545 (face font-lock-function-name-face fontified t) 3545 3546 (face (rainbow-delimiters-depth-1-face) fontified t) 3546 3597 (fontified t) 3597 3598 (face (rainbow-delimiters-depth-1-face) fontified t) 3598 3604 (fontified t) 3604 3608 (face font-lock-variable-name-face fontified t) 3608 3609 (fontified t) 3609 3610 (face font-lock-operator-face fontified t) 3610 3611 (fontified t) 3611 3616 (face font-lock-keyword-face fontified t) 3616 3629 (fontified t) 3629 3630 (face (rainbow-delimiters-depth-1-face) fontified t) 3630 3631 (face (rainbow-delimiters-depth-1-face) fontified t) 3631 3636 (fontified t) 3636 3639 (face font-lock-keyword-face fontified t) 3639 3646 (fontified t) 3646 3648 (face font-lock-keyword-face fontified t) 3648 3657 (fontified t) 3657 3658 (face (rainbow-delimiters-depth-1-face) fontified t) 3658 3665 (face font-lock-string-face fontified t) 3665 3667 (fontified t) 3667 3668 (face (rainbow-delimiters-depth-2-face) fontified t) 3668 3669 (face (rainbow-delimiters-depth-2-face) fontified t) 3669 3670 (face (rainbow-delimiters-depth-1-face) fontified t) 3670 3680 (fontified t) 3680 3683 (face font-lock-keyword-face fontified t) 3683 3688 (fontified t) 3688 3691 (fontified t) 3691 3693 (face font-lock-keyword-face fontified t) 3693 3703 (fontified t) 3703 3704 (face (rainbow-delimiters-depth-1-face) fontified t) 3704 3713 (face font-lock-string-face fontified t) 3713 3715 (fontified t) 3715 3716 (face (rainbow-delimiters-depth-2-face) fontified t) 3716 3717 (face (rainbow-delimiters-depth-2-face) fontified t) 3717 3718 (face (rainbow-delimiters-depth-1-face) fontified t) 3718 3720 (fontified t) 3720 3732 (fontified t) 3732 3737 (face font-lock-variable-name-face fontified t) 3737 3738 (fontified t) 3738 3739 (face font-lock-operator-face fontified t) 3739 3750 (fontified t) 3750 3751 (face (rainbow-delimiters-depth-1-face) fontified t) 3751 3758 (face font-lock-string-face fontified t) 3758 3760 (fontified t) 3760 3761 (face (rainbow-delimiters-depth-2-face) fontified t) 3761 3762 (face (rainbow-delimiters-depth-2-face) fontified t) 3762 3763 (face (rainbow-delimiters-depth-1-face) fontified t) 3763 3776 (fontified t) 3776 3779 (face font-lock-keyword-face fontified t) 3779 3784 (fontified t) 3784 3786 (face font-lock-keyword-face fontified t) 3786 3796 (fontified t) 3796 3797 (face (rainbow-delimiters-depth-1-face) fontified t) 3797 3807 (face font-lock-string-face fontified t) 3807 3809 (fontified t) 3809 3810 (face (rainbow-delimiters-depth-2-face) fontified t) 3810 3811 (face (rainbow-delimiters-depth-2-face) fontified t) 3811 3812 (face (rainbow-delimiters-depth-1-face) fontified t) 3812 3830 (fontified t) 3830 3835 (face font-lock-variable-name-face fontified t) 3835 3836 (fontified t) 3836 3837 (face font-lock-operator-face fontified t) 3837 3845 (fontified t) 3845 3846 (face (rainbow-delimiters-depth-1-face) fontified t) 3846 3852 (face font-lock-string-face fontified t) 3852 3854 (fontified t) 3854 3856 (face font-lock-string-face fontified t) 3856 3857 (face (rainbow-delimiters-depth-1-face) fontified t) 3857 3874 (fontified t) 3874 3878 (face font-lock-variable-name-face fontified t) 3878 3879 (fontified t) 3879 3880 (face font-lock-operator-face fontified t) 3880 3897 (fontified t) 3897 3898 (face (rainbow-delimiters-depth-1-face) fontified t) 3898 3910 (fontified t) 3910 3911 (face (rainbow-delimiters-depth-1-face) fontified t) 3911 3953 (fontified t) 3953 3954 (face (rainbow-delimiters-depth-1-face) fontified t) 3954 3976 (fontified t) 3976 3977 (face (rainbow-delimiters-depth-1-face) fontified t) 3977 3995 (fontified t) 3995 3997 (face font-lock-comment-delimiter-face fontified t) 3997 4030 (face font-lock-comment-face fontified t) 4030 4046 (fontified t) 4046 4048 (face font-lock-keyword-face fontified t) 4048 4065 (fontified t) 4065 4066 (face (rainbow-delimiters-depth-1-face) fontified t) 4066 4071 (fontified t) 4071 4072 (face (rainbow-delimiters-depth-1-face) fontified t) 4072 4074 (fontified t) 4074 4119 (fontified t) 4119 4120 (face (rainbow-delimiters-depth-1-face) fontified t) 4120 4155 (fontified t) 4155 4156 (face (rainbow-delimiters-depth-1-face) fontified t) 4156 4157 (fontified t) 4157 4173 (fontified t) 4173 4177 (face font-lock-keyword-face fontified t) 4177 4179 (fontified t) 4179 4199 (fontified t) 4199 4224 (fontified t) 4224 4225 (face (rainbow-delimiters-depth-1-face) fontified t) 4225 4260 (fontified t) 4260 4261 (face (rainbow-delimiters-depth-1-face) fontified t) 4261 4262 (fontified t rear-nonsticky t) 4262 4263 (fontified t) 4263 4268 (fontified t) 4268 4274 (face font-lock-keyword-face fontified t) 4274 4275 (fontified t) 4275 4276 (face (rainbow-delimiters-depth-1-face) fontified t) 4276 4284 (face font-lock-string-face fontified t) 4284 4286 (fontified t) 4286 4290 (face font-lock-string-face fontified t) 4290 4291 (face (rainbow-delimiters-depth-1-face) fontified t) 4291 4294 (fontified t) 4294 4296 (face font-lock-keyword-face fontified t) 4296 4297 (fontified t) 4297 4305 (face font-lock-builtin-face fontified t) 4305 4306 (fontified t) 4306 4308 (face font-lock-operator-face fontified t) 4308 4309 (fontified t) 4309 4319 (face font-lock-string-face fontified t) 4319 4321 (fontified t) 4321 4336 (fontified t) 4336 4337 (face (rainbow-delimiters-depth-1-face) fontified t) 4337 4347 (face font-lock-string-face fontified t) 4347 4353 (fontified t) 4353 4354 (face font-lock-operator-face fontified t) 4354 4363 (face font-lock-string-face fontified t) 4363 4369 (fontified t) 4369 4370 (face font-lock-operator-face fontified t) 4370 4376 (fontified t) 4376 4382 (face font-lock-builtin-face fontified t) 4382 4383 (face font-lock-operator-face fontified t) 4383 4387 (face font-lock-constant-face fontified t) 4387 4388 (face (rainbow-delimiters-depth-1-face) fontified t rear-nonsticky t)) . 1) (undo-tree-id314 . -342) (undo-tree-id315 . -931) (undo-tree-id316 . -4387) (undo-tree-id317 . -4321) (undo-tree-id318 . -4388) (undo-tree-id319 . 189) (undo-tree-id320 . -651) (undo-tree-id321 . -308) (undo-tree-id322 . -307) (undo-tree-id323 . -307) (undo-tree-id324 . -651) (undo-tree-id325 . -651) (undo-tree-id326 . -651) (undo-tree-id327 . -2670) (undo-tree-id328 . -2670) (undo-tree-id329 . -4173) (undo-tree-id330 . -4177) (undo-tree-id331 . -4094) (undo-tree-id332 . -4195) (undo-tree-id333 . -4198) (undo-tree-id334 . -4198) (undo-tree-id335 . -651) (undo-tree-id336 . -3086) (undo-tree-id337 . -3086) (undo-tree-id338 . -3086) (undo-tree-id339 . -3) (undo-tree-id340 . -3) (undo-tree-id341 . -514) (undo-tree-id342 . -447) (undo-tree-id343 . -446) (undo-tree-id344 . -472) (undo-tree-id345 . -652) (undo-tree-id346 . -472) (undo-tree-id347 . -931) (undo-tree-id348 . -3169) (undo-tree-id349 . -107) (undo-tree-id350 . -107) (undo-tree-id351 . -107) (undo-tree-id352 . -107) (undo-tree-id353 . -107) (undo-tree-id354 . -107) (undo-tree-id355 . -107) (undo-tree-id356 . -107) (undo-tree-id357 . -168) (undo-tree-id358 . -168) (undo-tree-id359 . -168) (undo-tree-id360 . -168) (undo-tree-id361 . -168) (undo-tree-id362 . -168) (undo-tree-id363 . -168) (undo-tree-id364 . -168) (undo-tree-id365 . -168) (undo-tree-id366 . -168) (undo-tree-id367 . -168) (undo-tree-id368 . -168) (undo-tree-id369 . -168) (undo-tree-id370 . -168) (undo-tree-id371 . -168) (undo-tree-id372 . -168) (undo-tree-id373 . -168) (undo-tree-id374 . -168) (undo-tree-id375 . -168) (undo-tree-id376 . -168) (undo-tree-id377 . -168) (undo-tree-id378 . -168) (undo-tree-id379 . -168) (undo-tree-id380 . -168) (undo-tree-id381 . -168) (undo-tree-id382 . -168) (undo-tree-id383 . -168) (undo-tree-id384 . -168) (undo-tree-id385 . -168) (undo-tree-id386 . -168) (undo-tree-id387 . -168) (undo-tree-id388 . -4321) (undo-tree-id389 . -4321) (undo-tree-id390 . -4321) (undo-tree-id391 . -4321) (undo-tree-id392 . -4321) (undo-tree-id393 . -4321) (undo-tree-id394 . -4321) (undo-tree-id395 . -4321) (undo-tree-id396 . -4321) (undo-tree-id397 . -4321) (undo-tree-id398 . -4321) (undo-tree-id399 . -4321) (undo-tree-id400 . -4321) (undo-tree-id401 . -4321) (undo-tree-id402 . -4321) (undo-tree-id403 . -4321) (undo-tree-id404 . -4321) (undo-tree-id405 . -4321) (undo-tree-id406 . -4321) (undo-tree-id407 . -4321) (undo-tree-id408 . -4321) (undo-tree-id409 . -4321) (undo-tree-id410 . -4321) (undo-tree-id411 . -4321) (undo-tree-id412 . -4321) (undo-tree-id413 . -4321) (undo-tree-id414 . -4321) (undo-tree-id415 . -4321) (undo-tree-id416 . -4321) (undo-tree-id417 . -4321) (undo-tree-id418 . -4321) (undo-tree-id419 . -4321) (undo-tree-id420 . -4321) (undo-tree-id421 . -4321) (undo-tree-id422 . -4321) (undo-tree-id423 . -931) (undo-tree-id424 . -4321) (undo-tree-id425 . -4321) (undo-tree-id426 . -4321) (undo-tree-id427 . -4321) (undo-tree-id428 . -4388) 4390 (t 27031 36424 705765 68000)) nil (27031 41082 330132 827000) 0 nil])
([nil nil ((#("```

Add to your `.secrets`:
```
ANTHROPIC_API_KEY=your_key_here
" 0 33 (fontified t) 33 50 (face font-lock-variable-name-face fontified t) 50 51 (face font-lock-operator-face fontified t) 51 63 (fontified t) 63 64 (rear-nonsticky t fontified t) 64 65 (fontified t)) . 4426) (undo-tree-id429 . -65) (undo-tree-id430 . -64) (undo-tree-id431 . -2) (undo-tree-id432 . -65) (undo-tree-id433 . 1) (undo-tree-id434 . -65) (undo-tree-id435 . -65) (undo-tree-id436 . -65) (undo-tree-id437 . -65) (undo-tree-id438 . -65) (undo-tree-id439 . -65) (undo-tree-id440 . -65) (undo-tree-id441 . -65) (undo-tree-id442 . -65) (undo-tree-id443 . -65) (undo-tree-id444 . -63) (undo-tree-id445 . -65) (undo-tree-id446 . -65) (undo-tree-id447 . -65) (undo-tree-id448 . -65) (undo-tree-id449 . -65) (undo-tree-id450 . -65) 4491 (t 27031 41082 332678 505000)) nil (27031 41085 642566 31000) 0 nil])
([nil nil ((4237 . 4242) (4212 . 4237) (t 27031 41085 644763 197000) 4200) nil (27031 41660 575193 615000) 0 nil])
([nil nil ((4243 . 4248) (4242 . 4244)) nil (27031 41660 575189 332000) 0 nil])
([nil nil ((#(":" 0 1 (fontified t)) . -4237) (undo-tree-id518 . -1) 4238 (4237 . 4238) (t 27031 41660 577616 102000)) nil (27031 41874 178687 714000) 0 nil])
([nil nil ((4246 . 4251) (#("s" 0 1 (face nil fontified t)) . -4246) (undo-tree-id473 . -1) (undo-tree-id474 . -1) (undo-tree-id475 . -1) (undo-tree-id476 . -1) (undo-tree-id477 . -1) (#("e" 0 1 (face nil fontified t)) . -4247) (undo-tree-id478 . -1) (undo-tree-id479 . -1) (undo-tree-id480 . -1) (undo-tree-id481 . -1) (undo-tree-id482 . -1) (#("n" 0 1 (face nil fontified t)) . -4248) (undo-tree-id483 . -1) (undo-tree-id484 . -1) (undo-tree-id485 . -1) (undo-tree-id486 . -1) (undo-tree-id487 . -1) (#("d" 0 1 (face nil fontified t)) . -4249) (undo-tree-id488 . -1) (undo-tree-id489 . -1) (undo-tree-id490 . -1) (undo-tree-id491 . -1) (undo-tree-id492 . -1) (#("i" 0 1 (face nil fontified t)) . -4250) (undo-tree-id493 . -1) (undo-tree-id494 . -1) (undo-tree-id495 . -1) (undo-tree-id496 . -1) (undo-tree-id497 . -1) (#("n" 0 1 (face nil fontified t)) . -4251) (undo-tree-id498 . -1) (undo-tree-id499 . -1) (undo-tree-id500 . -1) (undo-tree-id501 . -1) (undo-tree-id502 . -1) (#("g" 0 1 (face nil fontified t)) . -4252) (undo-tree-id503 . -1) (undo-tree-id504 . -1) (undo-tree-id505 . -1) (undo-tree-id506 . -1) (undo-tree-id507 . -1) (#("_" 0 1 (face nil fontified t)) . -4253) (undo-tree-id508 . -1) 4254 (4253 . 4254) (#(" " 0 1 (face nil fontified t)) . -4253) (undo-tree-id509 . -1) (undo-tree-id510 . -1) (undo-tree-id511 . -1) (undo-tree-id512 . -1) (undo-tree-id513 . -1) (#("m" 0 1 (face nil fontified t)) . -4254) (undo-tree-id514 . -1) (undo-tree-id515 . -1) (undo-tree-id516 . -1) (undo-tree-id517 . -1) 4255 (4246 . 4255) (4245 . 4247) (4244 . 4246) (#("'" 0 1 (fontified nil)) . -4244) (4243 . 4245)) nil (27031 41874 178685 704000) 0 nil])
([nil nil ((4257 . 4260) (4245 . 4257)) nil (27031 41874 178671 689000) 0 nil])
([nil nil ((#("r" 0 1 (fontified t)) . -4268) (undo-tree-id451 . -1) (undo-tree-id452 . -1) (undo-tree-id453 . -1) (undo-tree-id454 . -1) (undo-tree-id455 . -1) (undo-tree-id456 . -1) (undo-tree-id457 . -1) (undo-tree-id458 . -1) (undo-tree-id459 . -1) (undo-tree-id460 . -1) (undo-tree-id461 . -1) (undo-tree-id462 . -1) (undo-tree-id463 . -1) (undo-tree-id464 . -1) (undo-tree-id465 . -1) (undo-tree-id466 . -1) (undo-tree-id467 . -1) (#("e" 0 1 (fontified t)) . -4269) (undo-tree-id468 . -1) (undo-tree-id469 . -1) (#("p" 0 1 (fontified t)) . -4270) (undo-tree-id470 . -1) (#("l" 0 1 (fontified t)) . -4271) (undo-tree-id471 . -1) (#("y" 0 1 (fontified t)) . -4272) (undo-tree-id472 . -1) 4273) nil (27031 41874 178667 797000) 0 nil])
([nil nil ((3897 . 3912) (#("r" 0 1 (face font-lock-string-face fontified t)) . -3897) (undo-tree-id567 . -1) (undo-tree-id568 . -1) 3898 (3895 . 3898) (3894 . 3896) (#("'" 0 1 (face (rainbow-delimiters-depth-1-face) fontified nil)) . -3894) (3894 . 3895) (3888 . 3895) (3867 . 3888) (t 27031 41874 180820 224000) 3866) nil (27031 41904 106925 549000) 0 nil])
([nil nil ((nil rear-nonsticky nil 4065 . 4066) (nil fontified nil 4019 . 4066) (4019 . 4066) 4018) nil (27031 41904 106924 457000) 0 nil])
([nil nil ((#("                    print('its first contact')
" 0 20 (fontified nil) 20 25 (face font-lock-builtin-face fontified nil) 25 26 (face (rainbow-delimiters-depth-1-face) fontified nil) 26 45 (face font-lock-string-face fontified nil) 45 46 (face (rainbow-delimiters-depth-1-face) fontified nil) 46 47 (fontified nil rear-nonsticky nil)) . 4019) (undo-tree-id563 . -47) (undo-tree-id564 . -46) (undo-tree-id565 . -47) (undo-tree-id566 . -47) (nil rear-nonsticky t 4065 . 4066)) nil (27031 41904 106924 103000) 0 nil])
([nil nil ((#("                    " 0 20 (fontified t)) . -4020) (undo-tree-id562 . -20) 4040 (4019 . 4040) 4018) nil (27031 41904 106920 845000) 0 nil])
([nil nil ((nil rear-nonsticky nil 4066 . 4067) (nil fontified nil 4020 . 4067) (4020 . 4067)) nil (27031 41904 106919 509000) 0 nil])
([nil nil ((4051 . 4057) (#("first" 0 5 (face font-lock-string-face fontified t)) . 4051) (undo-tree-id519 . -4) (undo-tree-id520 . -1) (undo-tree-id521 . -1) (undo-tree-id522 . -1) (undo-tree-id523 . -1) (undo-tree-id524 . -1) (undo-tree-id525 . -1) (undo-tree-id526 . -1) (undo-tree-id527 . -1) (undo-tree-id528 . -1) (undo-tree-id529 . -1) (undo-tree-id530 . -1) (undo-tree-id531 . -1) (undo-tree-id532 . -1) (undo-tree-id533 . -1) (undo-tree-id534 . -1) (undo-tree-id535 . -1) (undo-tree-id536 . -1) (undo-tree-id537 . -1) (undo-tree-id538 . -1) (undo-tree-id539 . -1) (undo-tree-id540 . -1) (undo-tree-id541 . -1) (undo-tree-id542 . -1) (undo-tree-id543 . -1) (undo-tree-id544 . -1) (undo-tree-id545 . -1) (undo-tree-id546 . -1) (undo-tree-id547 . -1) (undo-tree-id548 . -1) (undo-tree-id549 . -1) (undo-tree-id550 . -1) (undo-tree-id551 . -1) (undo-tree-id552 . -1) (undo-tree-id553 . -1) (undo-tree-id554 . -1) (undo-tree-id555 . -1) (undo-tree-id556 . -1) (undo-tree-id557 . -1) (undo-tree-id558 . -1) (undo-tree-id559 . -1) (undo-tree-id560 . -5) (undo-tree-id561 . -5) 4052) nil (27031 41904 106914 957000) 0 nil])
([nil nil ((#("
" 0 1 (fontified t)) . 4068) (t 27031 41904 109395 475000)) nil (27031 41920 93063 675000) 0 nil])
([nil nil ((4523 . 4524) (4509 . 4523) (4508 . 4510) (#("'" 0 1 (face (rainbow-delimiters-depth-1-face) fontified nil)) . -4508) (4508 . 4509) (4502 . 4509) (4478 . 4502) (#("  " 0 2 (fontified nil)) . 4478) (4477 . 4480) (4472 . 4477) (#("    " 0 4 (fontified t)) . -4472) (undo-tree-id569 . -4) 4476 (4451 . 4476) 4365) nil (27031 41920 93060 33000) 0 nil])
([nil nil ((#("t" 0 1 (face font-lock-string-face fontified t)) . -1666) (undo-tree-id617 . -1) (undo-tree-id618 . -1) 1667 (1666 . 1667) (1665 . 1667) (#("'" 0 1 (face (rainbow-delimiters-depth-1-face) fontified nil)) . -1665) (1665 . 1666) (#("s" 0 1 (fontified t)) . -1665) (undo-tree-id619 . -1) (undo-tree-id620 . -1) (undo-tree-id621 . -1) (undo-tree-id622 . -1) (undo-tree-id623 . -1) (#("e" 0 1 (fontified t)) . -1666) (undo-tree-id624 . -1) (undo-tree-id625 . -1) (undo-tree-id626 . -1) (undo-tree-id627 . -1) (undo-tree-id628 . -1) (#("n" 0 1 (fontified t)) . -1667) (undo-tree-id629 . -1) (undo-tree-id630 . -1) (undo-tree-id631 . -1) (undo-tree-id632 . -1) (undo-tree-id633 . -1) (#("d" 0 1 (fontified t)) . -1668) (undo-tree-id634 . -1) (undo-tree-id635 . -1) (undo-tree-id636 . -1) (undo-tree-id637 . -1) (undo-tree-id638 . -1) (#("i" 0 1 (fontified t)) . -1669) (undo-tree-id639 . -1) (undo-tree-id640 . -1) (undo-tree-id641 . -1) (undo-tree-id642 . -1) (undo-tree-id643 . -1) (#("n" 0 1 (fontified t)) . -1670) (undo-tree-id644 . -1) (undo-tree-id645 . -1) (undo-tree-id646 . -1) (undo-tree-id647 . -1) (undo-tree-id648 . -1) (#("g" 0 1 (fontified t)) . -1671) (undo-tree-id649 . -1) (undo-tree-id650 . -1) (undo-tree-id651 . -1) (undo-tree-id652 . -1) (undo-tree-id653 . -1) (#(" " 0 1 (fontified t)) . -1672) (undo-tree-id654 . -1) (undo-tree-id655 . -1) (undo-tree-id656 . -1) (undo-tree-id657 . -1) (undo-tree-id658 . -1) (#("t" 0 1 (fontified t)) . -1673) (undo-tree-id659 . -1) (undo-tree-id660 . -1) (undo-tree-id661 . -1) (undo-tree-id662 . -1) (#("h" 0 1 (fontified t)) . -1674) (undo-tree-id663 . -1) (undo-tree-id664 . -1) (undo-tree-id665 . -1) (undo-tree-id666 . -1) 1675 (1672 . 1675) (1666 . 1672) (#("n" 0 1 (fontified t)) . -1666) (undo-tree-id667 . -1) (undo-tree-id668 . -1) (undo-tree-id669 . -1) (undo-tree-id670 . -1) 1667 (1665 . 1667) (1659 . 1666) (1650 . 1659) (t 27031 41920 95701 578000) 1618) nil (27031 41979 211488 343000) 0 nil])
([nil nil ((1665 . 1666)) nil (27031 41979 211381 366000) 0 nil])
([nil nil ((1668 . 1680) (1667 . 1669)) nil (27031 41979 211380 767000) 0 nil])
([nil nil ((#("s" 0 1 (face nil fontified t)) . -1668) (undo-tree-id593 . -1) (undo-tree-id594 . -1) (undo-tree-id595 . -1) (#("e" 0 1 (face nil fontified t)) . -1669) (undo-tree-id596 . -1) (undo-tree-id597 . -1) (undo-tree-id598 . -1) (#("n" 0 1 (face nil fontified t)) . -1670) (undo-tree-id599 . -1) (undo-tree-id600 . -1) (undo-tree-id601 . -1) (#("d" 0 1 (face nil fontified t)) . -1671) (undo-tree-id602 . -1) (undo-tree-id603 . -1) (undo-tree-id604 . -1) (#("i" 0 1 (face nil fontified t)) . -1672) (undo-tree-id605 . -1) (undo-tree-id606 . -1) (undo-tree-id607 . -1) (#("n" 0 1 (face nil fontified t)) . -1673) (undo-tree-id608 . -1) (undo-tree-id609 . -1) (undo-tree-id610 . -1) (#("g" 0 1 (face nil fontified t)) . -1674) (undo-tree-id611 . -1) (undo-tree-id612 . -1) (undo-tree-id613 . -1) (#(" " 0 1 (face nil fontified t)) . -1675) (undo-tree-id614 . -1) (undo-tree-id615 . -1) (undo-tree-id616 . -1) 1676) nil (27031 41979 211379 456000) 0 nil])
([nil nil ((1667 . 1679)) nil (27031 41979 211373 214000) 0 nil])
([nil nil ((#("t" 0 1 (face nil fontified t)) . -1680) (undo-tree-id574 . -1) (undo-tree-id575 . -1) (undo-tree-id576 . -1) (undo-tree-id577 . -1) (undo-tree-id578 . -1) (undo-tree-id579 . -1) (undo-tree-id580 . -1) (undo-tree-id581 . -1) (undo-tree-id582 . -1) (#("h" 0 1 (face nil fontified t)) . -1681) (undo-tree-id583 . -1) (undo-tree-id584 . -1) (undo-tree-id585 . -1) (undo-tree-id586 . -1) (#("i" 0 1 (face nil fontified t)) . -1682) (undo-tree-id587 . -1) (undo-tree-id588 . -1) (undo-tree-id589 . -1) (undo-tree-id590 . -1) (#("s" 0 1 (face nil fontified t)) . -1683) (undo-tree-id591 . -1) (undo-tree-id592 . -1) 1684) nil (27031 41979 211372 357000) 0 nil])
([nil nil ((nil rear-nonsticky nil 1680 . 1681) (nil fontified nil 1680 . 1681) (1680 . 1681) 1679) nil (27031 41979 211365 291000) 0 nil])
([nil nil ((#("
" 0 1 (face nil rear-nonsticky nil fontified nil)) . 1680) (undo-tree-id570 . -1) (undo-tree-id571 . -1) (undo-tree-id572 . -1) (undo-tree-id573 . -1) (nil rear-nonsticky t 1680 . 1681)) nil (27031 41979 211364 564000) 0 nil])
([nil nil ((1680 . 1687)) nil (27031 41979 211353 794000) 0 nil])
([nil nil ((1679 . 1680)) nil (27031 41979 211351 121000) 0 nil])
([nil nil ((nil rear-nonsticky nil 400 . 401) (nil fontified nil 360 . 401) (360 . 401) 359 (t 27031 41979 213826 968000)) nil (27031 42172 925564 680000) 0 nil])
([nil nil ((#("from bot import get_reply, handle_message" 0 9 (fontified nil) 9 15 (face font-lock-keyword-face fontified nil) 15 40 (fontified nil) 40 41 (rear-nonsticky nil fontified nil)) . 360) (undo-tree-id731 . -40) (undo-tree-id732 . -40) (undo-tree-id733 . -40) (undo-tree-id734 . -40) (nil rear-nonsticky t 400 . 401)) nil (27031 42172 925564 121000) 0 nil])
([nil nil ((nil rear-nonsticky nil 374 . 375) (nil fontified nil 334 . 375) (334 . 375) 333 (t 27031 41979 213826 968000)) nil (27031 42172 925562 810000) 0 nil])
([nil nil ((#("from bot import get_reply, handle_message" 0 9 (fontified nil) 9 15 (face font-lock-keyword-face fontified nil) 15 40 (fontified nil) 40 41 (rear-nonsticky nil fontified nil)) . 334) (undo-tree-id727 . -40) (undo-tree-id728 . -40) (undo-tree-id729 . -40) (undo-tree-id730 . -40) (nil rear-nonsticky t 374 . 375)) nil (27031 42172 925562 326000) 0 nil])
([nil nil ((345 . 346) (t 27031 41979 213826 968000) 333) nil (27031 42172 925560 933000) 0 nil])
([nil nil ((nil rear-nonsticky nil 386 . 387) (nil fontified nil 346 . 387) (346 . 387)) nil (27031 42172 925560 359000) 0 nil])
([nil nil ((#("from bot import get_reply
" 0 4 (face font-lock-keyword-face fontified t) 4 9 (fontified t) 9 14 (face font-lock-keyword-face fontified t) 14 15 (face font-lock-keyword-face fontified t) 15 25 (fontified t) 25 26 (fontified t)) . 320) (undo-tree-id671 . -26) (undo-tree-id672 . -25) (undo-tree-id673 . -20) (undo-tree-id674 . -20) (undo-tree-id675 . -14) (undo-tree-id676 . -14) (undo-tree-id677 . -14) (undo-tree-id678 . -24) (undo-tree-id679 . -24) (undo-tree-id680 . -24) (undo-tree-id681 . -24) (undo-tree-id682 . -24) (undo-tree-id683 . -24) (undo-tree-id684 . -24) (undo-tree-id685 . -24) (undo-tree-id686 . -24) (undo-tree-id687 . -24) (undo-tree-id688 . -24) (undo-tree-id689 . -24) (undo-tree-id690 . -24) (undo-tree-id691 . -24) (undo-tree-id692 . -24) (undo-tree-id693 . -24) (undo-tree-id694 . -24) (undo-tree-id695 . -24) (undo-tree-id696 . -24) (undo-tree-id697 . -24) (undo-tree-id698 . -24) (undo-tree-id699 . -24) (undo-tree-id700 . -24) (undo-tree-id701 . -24) (undo-tree-id702 . -24) (undo-tree-id703 . -24) (undo-tree-id704 . -24) (undo-tree-id705 . -24) (undo-tree-id706 . -24) (undo-tree-id707 . -24) (undo-tree-id708 . -24) (undo-tree-id709 . -24) (undo-tree-id710 . -24) (undo-tree-id711 . -24) (undo-tree-id712 . -24) (undo-tree-id713 . -24) (undo-tree-id714 . -24) (undo-tree-id715 . -24) (undo-tree-id716 . -24) (undo-tree-id717 . -24) (undo-tree-id718 . -24) (undo-tree-id719 . -24) (undo-tree-id720 . -24) (undo-tree-id721 . -24) (undo-tree-id722 . -24) (undo-tree-id723 . -24) (undo-tree-id724 . -24) (undo-tree-id725 . -24) (undo-tree-id726 . -26) 344) nil (27031 42172 925557 471000) 0 nil])
([nil nil ((nil rear-nonsticky nil 4463 . 4464) (nil fontified nil 4183 . 4464) (4183 . 4464) (#("                    if msg.get(\"type\") == \"text\":
                        user_text = msg.get(\"text\", {}).get(\"body\", \"\")
                        reply = get_reply(phone, user_text)
                        print(f'sending reply: {reply}')
                        background_tasks.add_task(send_whatsapp_message, phone, reply)
                    else:
                        print('should get here')" 0 20 (fontified t) 20 22 (face font-lock-keyword-face fontified t) 22 30 (fontified t) 30 31 (face (rainbow-delimiters-depth-1-face) fontified t) 31 37 (face font-lock-string-face fontified t) 37 38 (face (rainbow-delimiters-depth-1-face) fontified t) 38 39 (fontified t) 39 41 (face font-lock-operator-face fontified t) 41 42 (fontified t) 42 48 (face font-lock-string-face fontified t) 48 74 (fontified t) 74 83 (face font-lock-variable-name-face fontified t) 83 84 (fontified t) 84 85 (face font-lock-operator-face fontified t) 85 93 (fontified t) 93 94 (face (rainbow-delimiters-depth-1-face) fontified t) 94 100 (face font-lock-string-face fontified t) 100 102 (fontified t) 102 103 (face (rainbow-delimiters-depth-2-face) fontified t) 103 104 (face (rainbow-delimiters-depth-2-face) fontified t) 104 105 (face (rainbow-delimiters-depth-1-face) fontified t) 105 109 (fontified t) 109 110 (face (rainbow-delimiters-depth-1-face) fontified t) 110 116 (face font-lock-string-face fontified t) 116 118 (fontified t) 118 120 (face font-lock-string-face fontified t) 120 121 (face (rainbow-delimiters-depth-1-face) fontified t) 121 122 (fontified t) 122 146 (fontified t) 146 151 (face font-lock-variable-name-face fontified t) 151 152 (fontified t) 152 153 (face font-lock-operator-face fontified t) 153 163 (fontified t) 163 164 (face (rainbow-delimiters-depth-1-face) fontified t) 164 180 (fontified t) 180 181 (face (rainbow-delimiters-depth-1-face) fontified t) 181 182 (fontified t) 182 206 (fontified t) 206 211 (face font-lock-builtin-face fontified t) 211 212 (face (rainbow-delimiters-depth-1-face) fontified t) 212 213 (fontified t) 213 229 (face font-lock-string-face fontified t) 229 235 (face nil fontified t) 235 236 (face nil fontified t) 236 237 (face font-lock-string-face fontified t) 237 238 (face (rainbow-delimiters-depth-1-face) fontified t) 238 239 (fontified t) 239 288 (fontified t) 288 289 (face (rainbow-delimiters-depth-1-face) fontified t) 289 324 (fontified t) 324 325 (face (rainbow-delimiters-depth-1-face) fontified t) 325 326 (fontified t) 326 346 (fontified t) 346 350 (face font-lock-keyword-face fontified t) 350 352 (fontified t) 352 376 (fontified t) 376 381 (face font-lock-builtin-face fontified t) 381 382 (face (rainbow-delimiters-depth-1-face) fontified t) 382 399 (face font-lock-string-face fontified t) 399 400 (face (rainbow-delimiters-depth-1-face) fontified t)) . 4183) (undo-tree-id735 . -399) (undo-tree-id736 . -10) (undo-tree-id737 . -362) (undo-tree-id738 . -45) (undo-tree-id739 . -45) (undo-tree-id740 . -45) (undo-tree-id741 . -289) (undo-tree-id742 . -289) (undo-tree-id743 . -10) (undo-tree-id744 . -362) 4584 (t 27031 42172 927382 327000)) nil (27031 42205 612781 539000) 0 nil])
([nil nil ((#("        " 0 8 (fontified nil)) . -4406) (4394 . 4406) (#("        " 0 8 (fontified nil)) . -4346) (4334 . 4346) (#("    " 0 4 (fontified nil)) . -4304) (4296 . 4304) (4286 . 4290) (#("    " 0 4 (fontified nil)) . -4223) (4215 . 4223) (4183 . 4187) 4210) nil (27031 42205 612766 547000) 0 nil])
([nil nil ((#("            " 0 12 (fontified nil)) . -4478) (4454 . 4478) (#("            " 0 12 (fontified nil)) . -4406) (4382 . 4406) (#("        " 0 8 (fontified nil)) . -4352) (4332 . 4352) (#("    " 0 4 (fontified nil)) . -4326) (4310 . 4326) (#("        " 0 8 (fontified nil)) . -4247) (4227 . 4247) (#("    " 0 4 (fontified nil)) . -4199) (4183 . 4199) 4421) nil (27031 42205 612765 372000) 0 nil])
([nil nil ((#("                        " 0 24 (fontified nil)) . -4502) (4474 . 4502) (#("                        " 0 24 (fontified nil)) . -4426) (4398 . 4426) (#("                    " 0 20 (fontified nil)) . -4368) (4344 . 4368) (#("                " 0 16 (fontified nil)) . -4338) (4318 . 4338) (#("                    " 0 20 (fontified nil)) . -4255) (4231 . 4255) (#("                " 0 16 (fontified nil)) . -4203) (4183 . 4203) 4481) nil (27031 42205 612761 479000) 0 nil])
([nil nil ((1772 . 1773) (1766 . 1773) (1757 . 1766) (t 27031 42205 614199 344000) 1730) nil (27031 42255 149664 460000) 0 nil])
([nil nil ((#("                            " 0 28 (fontified t)) . -4491) (undo-tree-id747 . -28) 4519 (4490 . 4519) (t 27031 42255 150997 488000) 4489) nil (27031 42427 29478 200000) 0 nil])
([nil nil ((nil rear-nonsticky nil 4577 . 4578) (nil fontified nil 4491 . 4578) (4491 . 4578)) nil (27031 42427 29476 783000) 0 nil])
([nil nil ((#("                        " 0 24 (fontified nil)) . -4519) (4491 . 4519)) nil (27031 42427 29476 219000) 0 nil])
([nil nil ((#("
" 0 1 (fontified t)) . 4582) (undo-tree-id745 . 1) (undo-tree-id746 . 1)) nil (27031 42427 29473 145000) 0 nil])
([nil nil ((4610 . 4611) (t 27031 42427 30896 714000)) nil (27031 42430 570308 47000) 0 nil])
([nil nil ((#("j" 0 1 (face font-lock-comment-face fontified t)) . -4520) (undo-tree-id750 . -1) (undo-tree-id751 . -1) (undo-tree-id752 . -1) (undo-tree-id753 . -1) (undo-tree-id754 . -1) (undo-tree-id755 . -1) (undo-tree-id756 . -1) (undo-tree-id757 . -1) (undo-tree-id758 . -1) (undo-tree-id759 . -1) (undo-tree-id760 . -1) (undo-tree-id761 . -1) (undo-tree-id762 . -1) (undo-tree-id763 . -1) (undo-tree-id764 . -1) (undo-tree-id765 . -1) (undo-tree-id766 . -1) (undo-tree-id767 . -1) (undo-tree-id768 . -1) (undo-tree-id769 . -1) (undo-tree-id770 . -1) (undo-tree-id771 . -1) (undo-tree-id772 . -1) (undo-tree-id773 . -1) (undo-tree-id774 . -1) (undo-tree-id775 . -1) (undo-tree-id776 . -1) (undo-tree-id777 . -1) (undo-tree-id778 . -1) (undo-tree-id779 . -1) (undo-tree-id780 . -1) (undo-tree-id781 . -1) (undo-tree-id782 . -1) (undo-tree-id783 . -1) (undo-tree-id784 . -1) (undo-tree-id785 . -1) (undo-tree-id786 . -1) (undo-tree-id787 . -1) (undo-tree-id788 . -1) (undo-tree-id789 . -1) (undo-tree-id790 . -1) (undo-tree-id791 . -1) (undo-tree-id792 . -1) (undo-tree-id793 . -1) (undo-tree-id794 . -1) (undo-tree-id795 . -1) (undo-tree-id796 . -1) (undo-tree-id797 . -1) (undo-tree-id798 . -1) (undo-tree-id799 . -1) (undo-tree-id800 . -1) (undo-tree-id801 . -1) (undo-tree-id802 . -1) (undo-tree-id803 . -1) (undo-tree-id804 . -1) (undo-tree-id805 . -1) (undo-tree-id806 . -1) (undo-tree-id807 . -1) (undo-tree-id808 . -1) (undo-tree-id809 . -1) (undo-tree-id810 . -1) (undo-tree-id811 . -1) (undo-tree-id812 . -1) (undo-tree-id813 . -1) (undo-tree-id814 . -1) (undo-tree-id815 . -1) (undo-tree-id816 . -1) (undo-tree-id817 . -1) (undo-tree-id818 . -1) (undo-tree-id819 . -1) (undo-tree-id820 . -1) (undo-tree-id821 . -1) (undo-tree-id822 . -1) (undo-tree-id823 . -1) (undo-tree-id824 . -1) (undo-tree-id825 . -1) (undo-tree-id826 . -1) (undo-tree-id827 . -1) (undo-tree-id828 . -1) (undo-tree-id829 . -1) (undo-tree-id830 . -1) (undo-tree-id831 . -1) (undo-tree-id832 . -1) (undo-tree-id833 . -1) (undo-tree-id834 . -1) 4521 (4519 . 4521) (t 27031 42430 571903 86000)) nil (27031 42534 328560 85000) 0 nil])
([nil current ((#("#" 0 1 (face font-lock-comment-delimiter-face fontified t)) . 4611) (undo-tree-id748 . -1) (undo-tree-id749 . -1)) nil (27031 42534 328529 426000) 0 nil])
nil
